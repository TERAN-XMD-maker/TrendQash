<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TrendQash Portal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          boxShadow: {
            soft: '0 8px 22px rgba(2, 6, 23, 0.08)',
            softDark: '0 8px 22px rgba(0,0,0,0.45)',
          }
        }
      }
    }
  </script>
  <style>
    .marquee {
      overflow: hidden;
      position: relative;
      background: #111827;
      color: #fff;
    }
    .marquee p {
      display: inline-block;
      white-space: nowrap;
      padding-left: 100%;
      animation: marquee 15s linear infinite;
    }
    @keyframes marquee {
      0%   { transform: translate(0, 0); }
      100% { transform: translate(-100%, 0); }
    }
    .country-card:hover { transform: scale(1.05); transition: 0.3s; }

    .earn-canvas-1 { 
      background-image:
        radial-gradient(60% 60% at 15% 10%, rgba(255,255,255,0.30), transparent 40%),
        linear-gradient(135deg, #FF6B6B 0%, #FF8E53 45%, #FFD36E 100%);
    }
    .earn-canvas-2 { 
      background-image:
        radial-gradient(60% 60% at 85% 12%, rgba(255,255,255,0.28), transparent 40%),
        linear-gradient(135deg, #36D1DC 0%, #5B86E5 100%);
    }
    .earn-canvas-3 { 
      background-image:
        radial-gradient(60% 60% at 10% 85%, rgba(255,255,255,0.25), transparent 40%),
        linear-gradient(135deg, #1FD1A5 0%, #34D399 45%, #10B981 100%);
    }
    .earn-canvas-4 { 
      background-image:
        radial-gradient(60% 60% at 90% 80%, rgba(255,255,255,0.25), transparent 40%),
        linear-gradient(135deg, #A18CD1 0%, #FBC2EB 100%);
    }
    .earn-canvas-5 {
      background-image:
        radial-gradient(60% 60% at 25% 20%, rgba(255,255,255,0.28), transparent 40%),
        linear-gradient(135deg, #F7971E 0%, #FFD200 100%);
    }
    .earn-canvas-6 {
      background-image:
        radial-gradient(60% 60% at 80% 20%, rgba(255,255,255,0.22), transparent 40%),
        linear-gradient(135deg, #00C6FF 0%, #0072FF 100%);
    }
    .dark .earn-canvas-1 { 
      background-image:
        radial-gradient(50% 50% at 20% 20%, rgba(255,255,255,0.06), transparent 40%),
        linear-gradient(135deg, #B91C1C 0%, #C2410C 45%, #CA8A04 100%);
    }
    .dark .earn-canvas-2 { 
      background-image:
        radial-gradient(50% 50% at 80% 18%, rgba(255,255,255,0.06), transparent 40%),
        linear-gradient(135deg, #0EA5E9 0%, #4338CA 100%);
    }
    .dark .earn-canvas-3 { 
      background-image:
        radial-gradient(50% 50% at 12% 78%, rgba(255,255,255,0.06), transparent 40%),
        linear-gradient(135deg, #0F766E 0%, #0EA5A0 45%, #059669 100%);
    }
    .dark .earn-canvas-4 { 
      background-image:
        radial-gradient(50% 50% at 82% 82%, rgba(255,255,255,0.06), transparent 40%),
        linear-gradient(135deg, #6D28D9 0%, #DB2777 100%);
    }
    .dark .earn-canvas-5 {
      background-image:
        radial-gradient(50% 50% at 28% 24%, rgba(255,255,255,0.06), transparent 40%),
        linear-gradient(135deg, #D97706 0%, #F59E0B 100%);
    }
    .dark .earn-canvas-6 {
      background-image:
        radial-gradient(50% 50% at 76% 24%, rgba(255,255,255,0.06), transparent 40%),
        linear-gradient(135deg, #0369A1 0%, #1D4ED8 100%);
    }
    .task-card {
      border-radius: 14px;
      padding: 14px;
      box-shadow: var(--card-shadow, 0 10px 26px rgba(2,6,23,.08));
    }
    .dark .task-card { --card-shadow: 0 10px 26px rgba(0,0,0,.45); }
    .canvas-title { color: #0b1324; font-weight: 800; letter-spacing: .1px; }
    .canvas-desc  { color: rgba(11,19,36,0.85); }
    .dark .canvas-title { color: #F8FAFC; }
    .dark .canvas-desc  { color: rgba(248,250,252,0.85); }
    .wa-canvas {
      background-image:
        radial-gradient(circle at 10% 10%, rgba(255,255,255,0.05), transparent 8%),
        linear-gradient(135deg, #34D399 0%, #10B981 50%, #059669 100%);
      padding: 14px;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(3, 7, 18, 0.12);
      color: white;
    }
    .dark .wa-canvas {
      background-image:
        radial-gradient(circle at 12% 16%, rgba(255,255,255,0.06), transparent 10%),
        linear-gradient(135deg, #065F46 0%, #047857 50%, #059669 100%);
      box-shadow: 0 10px 30px rgba(0,0,0,0.45);
    }
    .wa-canvas .wa-input {
      background: rgba(255,255,255,0.98);
      border-radius: 12px;
      padding: 12px;
      border: 0;
      width: 100%;
      box-sizing: border-box;
      color: #071033;
      min-height: 110px;
    }
    .dark .wa-canvas .wa-input {
      background: rgba(255,255,255,0.95);
      color: #0a122b;
    }
    .wa-canvas .wa-btn {
      background: rgba(255,255,255,0.95);
      color: #065F46;
      padding: 10px 14px;
      border-radius: 10px;
      border: 0;
      font-weight: 800;
      cursor: pointer;
      box-shadow: 0 6px 16px rgba(2,6,23,0.10);
    }
    #gallery img { border-radius: 12px; object-fit: cover; }
    .faq-item {
      border-radius: 12px;
      overflow: hidden;
      transition: box-shadow .25s ease;
    }
    .faq-item.open { box-shadow: 0 12px 28px rgba(2,6,23,.10); }
    .dark .faq-item.open { box-shadow: 0 12px 28px rgba(0,0,0,.45); }
    .faq-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height .35s ease, opacity .25s ease;
      opacity: 0;
    }
    .faq-item.open .faq-content {
      opacity: 1;
    }
    .faq-chevron {
      transition: transform .25s ease;
    }
    .faq-item.open .faq-chevron {
      transform: rotate(180deg);
    }
    @media (max-width:640px){
      .earn-canvas-1, .earn-canvas-2, .earn-canvas-3, .earn-canvas-4, .earn-canvas-5, .earn-canvas-6 { padding:12px; }
    }
  </style>
</head>
<body class="bg-gray-100 dark:bg-slate-900 min-h-screen flex flex-col text-slate-800 dark:text-slate-100">

  <div class="marquee py-2 text-sm font-semibold">
    <p>Trusted by thousands across Africa üåç | Instant Payouts üí∏ | Join today and start earning üöÄ</p>
  </div>

  <header class="sticky top-0 z-40 bg-white/70 dark:bg-slate-900/70 backdrop-blur border-b border-slate-200 dark:border-slate-800">
    <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <span class="text-xl font-extrabold tracking-wide">TrendQash</span>
        <span class="text-xs px-2 py-0.5 rounded-full bg-indigo-600 text-white dark:bg-indigo-500">Portal</span>
      </div>
      <div class="flex items-center gap-2">
        <button id="themeToggle" class="px-3 py-1.5 rounded-lg border border-slate-300 dark:border-slate-700 text-sm hover:bg-slate-50 dark:hover:bg-slate-800">
          <span class="inline dark:hidden">üåô Dark</span>
          <span class="hidden dark:inline">‚òÄÔ∏è Light</span>
        </button>
        <button id="switchCountryBtn" class="px-3 py-1.5 rounded-lg border border-slate-300 dark:border-slate-700 text-sm ml-2 hover:bg-slate-50 dark:hover:bg-slate-800">
          üåç Switch Country
        </button>
      </div>
    </div>
  </header>

  <div id="countryModal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50">
    <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-6 max-w-lg w-full text-slate-800 dark:text-slate-100">
      <h2 class="text-xl font-bold text-center mb-4">Select Your Country</h2>
      <div class="grid grid-cols-2 gap-4">
        <div class="country-card p-4 bg-gray-50 dark:bg-slate-700 rounded-xl cursor-pointer" data-country="malawi">
          <p class="font-semibold">üá≤üáº Malawi</p>
        </div>
        <div class="country-card p-4 bg-gray-50 dark:bg-slate-700 rounded-xl cursor-pointer" data-country="botswana">
          <p class="font-semibold">üáßüáº Botswana</p>
        </div>
        <div class="country-card p-4 bg-gray-50 dark:bg-slate-700 rounded-xl cursor-pointer" data-country="kenya">
          <p class="font-semibold">üá∞üá™ Kenya</p>
        </div>
        <div class="country-card p-4 bg-gray-50 dark:bg-slate-700 rounded-xl cursor-pointer" data-country="ghana">
          <p class="font-semibold">üá¨üá≠ Ghana</p>
        </div>
        <div class="country-card p-4 bg-gray-50 dark:bg-slate-700 rounded-xl cursor-pointer" data-country="uganda">
          <p class="font-semibold">üá∫üá¨ Uganda</p>
        </div>
      </div>
      <button id="continueBtn" class="mt-6 w-full bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-4 rounded-lg">Continue</button>
    </div>
  </div>

  <main id="content" class="flex-grow p-4 space-y-6 max-w-5xl mx-auto w-full"></main>

  <footer class="text-center text-xs text-gray-500 dark:text-slate-400 py-6">¬© TrendQash Agencies ‚Äî Support: WhatsApp +254717028877</footer>

  <script>
    (function initTheme(){
      const root = document.documentElement;
      const stored = localStorage.getItem('tq_theme');
      if (stored === 'dark') root.classList.add('dark');
      if (stored === 'light') root.classList.remove('dark');
      const btn = document.getElementById('themeToggle');
      btn?.addEventListener('click', () => {
        root.classList.toggle('dark');
        localStorage.setItem('tq_theme', root.classList.contains('dark') ? 'dark' : 'light');
      });
    })();

    const ECON = {
      kenya:   { name: "Kenya",   currency: "KES", activation: 550,   payouts:{ youtube:50, memes:50, tiktok:50, survey:50, ads:50, invite:3000, rank:500, welcome:150 } },
      uganda:  { name: "Uganda",  currency: "UGX", activation: 20000, payouts:{ youtube:1500, memes:1500, tiktok:1500, survey:1500, ads:1500, invite:20000, rank:4000, welcome:5000 } },
      ghana:   { name: "Ghana",   currency: "GHC", activation: 80,    payouts:{ youtube:20, memes:20, tiktok:20, survey:20, ads:20, invite:200,  rank:50,  welcome:20 } },
      botswana:{ name: "Botswana",currency: "BWP", activation: 100,   payouts:{ youtube:40, memes:40, tiktok:40, survey:40, ads:40, invite:400,  rank:100, welcome:30 } },
      malawi:  { name: "Malawi",  currency: "MWK", activation: 12000, payouts:{ youtube:2000, memes:2000, tiktok:2000, survey:2000, ads:2000, invite:6000, rank:1500, welcome:3000 } }
    };

    const COUNTRY_MEDIA = {
      malawi:   [
        "https://i.postimg.cc/tTcMMCBx/IMG-20250709-WA0014.jpg",
        "https://i.postimg.cc/NMFnDrkt/IMG-20250709-WA0015.jpg"
      ],
      botswana: [
        "https://i.postimg.cc/8cr0QQYn/IMG-20250711-WA0004.jpg",
        "https://i.postimg.cc/t7Qm9vQR/IMG-20250711-WA0026.jpg"
      ],
      kenya:    [
        "https://i.postimg.cc/wjYSzMg5/IMG-20250718-WA0026.jpg",
        "https://i.postimg.cc/qqt9JCNw/IMG-20250819-WA0013.jpg"
      ],
      ghana:    [
        "https://i.postimg.cc/QdgvdDd2/IMG-20250801-WA0025.jpg",
        "https://i.postimg.cc/nL05q17T/IMG-20250816-WA0021.jpg"
      ],
      uganda:   [
        "https://i.postimg.cc/D0tR8ysT/IMG-20250808-WA0018.jpg",
        "https://i.postimg.cc/1z92gdgf/IMG-20250808-WA0019.jpg"
      ]
    };

    const METHODS = [
      { key:"youtube", icon:"üé•", title:"Watch YouTube Videos",
        desc:"Watch approved short videos and mark completion. Payouts post-verification." },
      { key:"memes", icon:"üòÇ", title:"Create & Post Memes",
        desc:"Share verified memes. Approved posts earn payouts." },
      { key:"tiktok", icon:"üì±", title:"Watch TikTok Clips",
        desc:"Short clips ‚Äî watch, engage, confirm completion." },
      { key:"survey", icon:"üìù", title:"Answer Surveys",
        desc:"Short multiple-choice surveys. Honest answers required." },
      { key:"ads", icon:"üì∫", title:"Click/Interact Ads",
        desc:"Follow sponsor instructions exactly to qualify." },
      { key:"invite", icon:"üë•", title:"Invite Friends (Referrals)",
        desc:"Use your referral link. Bonus after they activate." },
      { key:"rank", icon:"üèÜ", title:"Agent Ranking & Bonuses",
        desc:"Hit milestones for rank bonuses." },
      { key:"welcome", icon:"üéÅ", title:"Welcome Bonus",
        desc:"One-time bonus credited after activation." }
    ];

    const $  = (s, r=document) => r.querySelector(s);
    const $all = (s, r=document) => Array.from(r.querySelectorAll(s));
    const fmt = n => (typeof n === 'number') ? n.toLocaleString() : n;

    let selectedCountry = null;

    document.addEventListener('DOMContentLoaded', () => {
      $all('.country-card').forEach(card => {
        card.addEventListener('click', () => {
          selectedCountry = card.dataset.country;
          $all('.country-card').forEach(c => c.classList.remove('ring-2','ring-indigo-500','bg-white','dark:bg-slate-600'));
          card.classList.add('ring-2','ring-indigo-500','bg-white','dark:bg-slate-600');
        });
      });

      $('#continueBtn').addEventListener('click', () => {
        if(!selectedCountry){
          alert('Please tap a country first');
          return;
        }
        localStorage.setItem('trend_country', selectedCountry);
        $('#countryModal').classList.add('hidden');
        renderCountry(selectedCountry);
      });

      $('#switchCountryBtn').addEventListener('click', () => {
        localStorage.removeItem('trend_country');
        $('#countryModal').classList.remove('hidden');
      });

      const saved = localStorage.getItem('trend_country');
      if(saved && ECON[saved]){
        selectedCountry = saved;
        $('#countryModal').classList.add('hidden');
        renderCountry(saved);
      }
    });

    function renderCountry(key){
      const info = ECON[key];
      const media = COUNTRY_MEDIA[key] || [];
      const content = $('#content');

      const headerHTML = `
        <section class="bg-white dark:bg-slate-800 rounded-2xl shadow-soft dark:shadow-softDark p-4 flex items-center justify-between">
          <div>
            <h1 class="text-2xl font-extrabold">TrendQash ‚Äî ${info.name}</h1>
            <p class="text-sm text-gray-500 dark:text-slate-400">Earn in ${info.currency}. Local payouts & calculators below.</p>
          </div>
          <div class="text-right">
            <div class="text-xs text-gray-500 dark:text-slate-400">Activation fee</div>
            <div class="font-semibold">${fmt(info.activation)} ${info.currency}</div>
          </div>
        </section>`;

      const galleryHTML = `
        <section class="bg-white dark:bg-slate-800 rounded-2xl shadow-soft dark:shadow-softDark p-4">
          <div class="flex items-center justify-between mb-2">
            <h3 class="font-bold">Recent Proof & Updates ‚Äî ${info.name}</h3>
            <div class="text-xs text-gray-500 dark:text-slate-400">Swipe or use arrows</div>
          </div>
          <div class="relative">
            <div id="gallery" class="flex gap-3 overflow-x-auto scroll-smooth snap-x snap-mandatory">
              ${media.map(src => `<img src="${src}" alt="${info.name} update" class="h-44 sm:h-60 w-80 object-cover rounded-xl flex-none snap-start">`).join('')}
            </div>
            <button id="gPrev" class="absolute left-2 top-1/2 -translate-y-1/2 bg-white/80 dark:bg-slate-700/80 hover:bg-white dark:hover:bg-slate-700 px-3 py-2 rounded-full shadow">‚Äπ</button>
            <button id="gNext" class="absolute right-2 top-1/2 -translate-y-1/2 bg-white/80 dark:bg-slate-700/80 hover:bg-white dark:hover:bg-slate-700 px-3 py-2 rounded-full shadow">‚Ä∫</button>
          </div>
        </section>`;

      const earnHTML = `<section id="earnHost" class="space-y-4"></section>`;

      const joinHTML = `
        <section class="bg-white dark:bg-slate-800 rounded-2xl shadow-soft dark:shadow-softDark p-4">
          <h3 class="text-lg font-bold mb-2">How to Join ‚Äî ${info.name}</h3>
          <ol class="list-decimal pl-5 text-sm text-gray-600 dark:text-slate-300">
            <li>Open the official register link (new tab).</li>
            <li>Pay the activation fee: <strong>${fmt(info.activation)} ${info.currency}</strong>.</li>
            <li>Complete profile, then start tasks & referrals.</li>
          </ol>
          <div class="mt-3 flex gap-2 flex-wrap">
            <a id="joinBtn" class="btn bg-teal-600 text-white hover:bg-teal-700 rounded-full px-4 py-2" target="_blank" rel="noopener noreferrer">üëâ Join Now</a>
            <button id="joinCopy" class="btn border border-slate-200 dark:border-slate-600 rounded-full px-4 py-2">Copy Join Link</button>
          </div>
          <div class="mt-6 wa-canvas">
            <h4 class="font-semibold mb-2">Contact Support via WhatsApp</h4>
            <p class="text-sm mb-2">Type your message then press <em>Send to WhatsApp</em>. It opens WhatsApp with your message ready.</p>
            <textarea id="waMsg" class="wa-input" placeholder="Type your message..."></textarea>
            <div class="mt-3 flex gap-2 flex-wrap">
              <button id="waSend" class="wa-btn">Send to WhatsApp</button>
              <button id="waExample" class="wa-btn" style="background: rgba(255,255,255,0.15); color: #fff;">Use Example</button>
            </div>
            <p id="waHint" class="text-xs mt-2" style="color: rgba(255,255,255,0.95)"></p>
          </div>
        </section>`;

      const extrasHTML = `
        <section class="bg-white dark:bg-slate-800 rounded-2xl shadow-soft dark:shadow-softDark p-4">
          <h4 class="font-bold mb-3">FAQ</h4>
          <div class="space-y-3" id="faqHost">
            ${faqItem("When are payouts processed?",
              "Payouts are typically processed weekly after verification. Exact timing can vary based on campaign and country-specific payment rails.")}
            ${faqItem("Which payment channels are supported?",
              "Depends on your country: M-Pesa, MTN, Airtel Money, bank transfers or local partners. You can confirm in WhatsApp before activating.")}
            ${faqItem("How do referrals work?",
              "Share your unique link. When they activate successfully, your referral bonus is queued for payout.")}
            ${faqItem("Is there a welcome bonus?",
              "Yes. After activation, a one-time welcome bonus is credited instantly on eligible campaigns.")}
          </div>
        </section>
        <section class="bg-white dark:bg-slate-800 rounded-2xl shadow-soft dark:shadow-softDark p-4 text-center">
          <h4 class="font-bold mb-2">Share TrendQash</h4>
          <p class="text-sm text-gray-500 dark:text-slate-400 mb-3">Help your friends join ‚Äî sharing increases referral chances.</p>
          <div class="flex justify-center gap-2 flex-wrap">
            <button id="shareWa" class="btn bg-green-600 hover:bg-green-700 text-white rounded-full px-4 py-2">Share via WhatsApp</button>
            <button id="shareCopy" class="btn border border-slate-200 dark:border-slate-600 rounded-full px-4 py-2">Copy Link</button>
          </div>
        </section>
        <section class="mt-16 max-w-2xl mx-auto bg-gray-800 rounded-2xl shadow-lg p-6">
          <h2 class="text-2xl font-bold text-center text-indigo-400">ü§ñ TrendQash Assistant</h2>
          <p class="text-center text-gray-400 mb-4">Ask me anything about joining, earning, or withdrawals!</p>
          <div id="chatContainer" class="h-72 overflow-y-auto bg-gray-900 rounded-lg p-4 space-y-3">
            <div class="text-sm text-gray-400 text-center">Chat started. Type your question below üëá</div>
          </div>
          <div class="flex mt-4">
            <input id="chatInput" type="text" class="flex-grow rounded-l-lg p-3 text-black" placeholder="Type your question..." />
            <button id="chatSendBtn" class="bg-indigo-600 hover:bg-indigo-700 px-5 rounded-r-lg font-semibold">Send</button>
          </div>
          <div class="flex flex-wrap gap-2 mt-4 justify-center">
            <button class="quickAsk bg-gray-700 hover:bg-indigo-600 text-white px-4 py-2 rounded-full text-sm">How do I join?</button>
            <button class="quickAsk bg-gray-700 hover:bg-indigo-600 text-white px-4 py-2 rounded-full text-sm">How do I withdraw?</button>
            <button class="quickAsk bg-gray-700 hover:bg-indigo-600 text-white px-4 py-2 rounded-full text-sm">How can I earn?</button>
            <button class="quickAsk bg-gray-700 hover:bg-indigo-600 text-white px-4 py-2 rounded-full text-sm">Is it legit?</button>
          </div>
        </section>
      `;

      const html = headerHTML + galleryHTML + earnHTML + joinHTML + extrasHTML;
      content.innerHTML = html;

      const gallery = $('#gallery');
      if (gallery) {
        $('#gPrev').addEventListener('click', ()=> gallery.scrollBy({left: -gallery.clientWidth, behavior:'smooth'}));
        $('#gNext').addEventListener('click', ()=> gallery.scrollBy({left:  gallery.clientWidth, behavior:'smooth'}));
      }

      renderEarnings(info);

      const joinUrl = 'https://www.trendqash.com/user/register.php?ref=Teranchamp';
      $('#joinBtn').setAttribute('href', joinUrl);
      $('#joinCopy').addEventListener('click', async ()=>{
        try{ await navigator.clipboard.writeText(joinUrl); alert('Join link copied'); }
        catch{ alert('Copy failed ‚Äî URL: '+joinUrl); }
      });

      $('#shareWa').addEventListener('click', ()=>{
        const text = `Join me on TrendQash (${info.name}). Register here: ${joinUrl}`;
        window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
      });
      $('#shareCopy').addEventListener('click', async ()=>{
        try{ await navigator.clipboard.writeText(joinUrl); alert('Link copied'); }
        catch{ alert('Copy failed ‚Äî URL: '+joinUrl); }
      });

      const def = exampleWa(info);
      const waMsgEl = $('#waMsg');
      if (waMsgEl) {
        waMsgEl.value = def;
        $('#waHint').textContent = 'Example: ' + def;
      }
      $('#waExample').addEventListener('click', ()=> { $('#waMsg').value = def; $('#waMsg').focus(); });
      $('#waSend').addEventListener('click', ()=>{
        const raw = ($('#waMsg').value||'').trim();
        if(!raw){ alert('Please type your message first.'); return; }
        const phone = '254717028877';
        const url = `https://wa.me/${phone}?text=${encodeURIComponent(raw)}`;
        window.open(url, '_blank');
      });

      initFAQ();
      initChatbot();
    }

    function faqItem(q, a){
      return `
        <article class="faq-item bg-slate-50 dark:bg-slate-900/60 border border-slate-200 dark:border-slate-700">
          <button class="w-full flex items-center justify-between gap-3 px-4 py-3 text-left select-none">
            <span class="font-semibold">${q}</span>
            <svg class="faq-chevron w-5 h-5 text-slate-600 dark:text-slate-300" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.15l3.71-2.92a.75.75 0 111.06 1.06l-4.24 3.34a.75.75 0 01-.94 0L5.21 8.29a.75.75 0 01.02-1.08z" clip-rule="evenodd"/>
            </svg>
          </button>
          <div class="faq-content px-4" data-answer>
            <div class="py-0 pb-4 text-sm text-slate-600 dark:text-slate-300">${a}</div>
          </div>
        </article>`;
    }

    function initFAQ(){
      const items = $all('#faqHost .faq-item');
      items.forEach(item => {
        const btn = item.querySelector('button');
        const content = item.querySelector('[data-answer]');
        content.style.maxHeight = '0px';
        btn.addEventListener('click', () => {
          const isOpen = item.classList.contains('open');
          items.forEach(it => {
            it.classList.remove('open');
            const c = it.querySelector('[data-answer]');
            c.style.maxHeight = '0px';
          });
          if(!isOpen){
            item.classList.add('open');
            content.style.maxHeight = content.scrollHeight + 'px';
          }
        });
      });
    }

    function renderEarnings(info){
      const host = $('#earnHost');
      host.innerHTML = '';

      const head = document.createElement('section');
      head.className = 'bg-white dark:bg-slate-800 rounded-2xl shadow-soft dark:shadow-softDark p-4';
      head.innerHTML = `<h3 class="text-lg font-bold">Ways of Earning ‚Äî ${info.name}</h3><p class="text-sm text-gray-500 dark:text-slate-400">Each card has a quick calculator.</p>`;
      host.appendChild(head);

      const grid = document.createElement('div');
      grid.className = 'grid gap-4 sm:grid-cols-2';
      const canvases = ['earn-canvas-1','earn-canvas-2','earn-canvas-3','earn-canvas-4','earn-canvas-5','earn-canvas-6'];

      METHODS.forEach((m, i) => {
        const rate = info.payouts[m.key];
        const canvasClass = canvases[i % canvases.length];
        const card = document.createElement('article');
        card.className = `task-card ${canvasClass} rounded-xl p-3 text-slate-900 dark:text-slate-50`;
        card.innerHTML = `
          <div class="flex items-start justify-between gap-3">
            <div class="flex items-start gap-3">
              <div class="text-2xl">${m.icon}</div>
              <div>
                <div class="canvas-title">${m.title}</div>
                <div class="text-sm canvas-desc">${m.desc}</div>
              </div>
            </div>
            <div class="text-right">
              <div class="font-extrabold canvas-title">${fmt(rate)} ${info.currency}${m.key==='invite'?' (max/day)':''}</div>
              <div class="text-xs canvas-desc">per ${m.key==='invite'?'referral':'item'}</div>
            </div>
          </div>
          ${ m.key==='welcome' ? `
            <div class="text-sm canvas-desc mt-2">One-time reward: <strong>${fmt(rate)} ${info.currency}</strong></div>
          ` : `
            <div class="mt-3 flex items-center gap-2">
              <input type="number" min="0" placeholder="${m.key==='invite'?'Enter invites':'Enter quantity'}" class="calc-input border border-white/60 dark:border-white/30 bg-white/90 dark:bg-white/90 rounded px-2 py-1 text-sm flex-1 text-slate-900" data-method="${m.key}">
              <button class="calc-btn bg-white/95 text-gray-900 rounded-full px-3 py-1 text-sm font-bold shadow" data-method="${m.key}">Calculate</button>
            </div>
            <div class="mt-2 text-xs canvas-desc" data-result="${m.key}"></div>
          `}
        `;
        grid.appendChild(card);
      });
      host.appendChild(grid);

      grid.addEventListener('input', (e)=>{
        const input = e.target.closest('.calc-input');
        if(!input) return;
        const method = input.dataset.method;
        const qty = Number(input.value||0);
        const rate = info.payouts[method]||0;
        const out = grid.querySelector(`[data-result="${method}"]`);
        if(qty<=0){ out.textContent=''; return; }
        const total = qty*rate;
        out.textContent = `${method==='invite'?'Estimated referral reward':'Estimated payout'}: ${fmt(total)} ${info.currency}.`;
      });
      grid.addEventListener('click', (e)=>{
        const btn = e.target.closest('.calc-btn');
        if(!btn) return;
        const method = btn.dataset.method;
        const input = grid.querySelector(`.calc-input[data-method="${method}"]`);
        const qty = Number(input?.value||0);
        const rate = info.payouts[method]||0;
        const out = grid.querySelector(`[data-result="${method}"]`);
        if(qty<=0){ out.textContent='Enter a quantity.'; return; }
        const total = qty*rate;
        out.textContent = `${method==='invite'?'Estimated referral reward':'Estimated payout'}: ${fmt(total)} ${info.currency}.`;
      });

      const summary = document.createElement('section');
      summary.className = 'bg-white dark:bg-slate-800 rounded-2xl shadow-soft dark:shadow-softDark p-4';
      summary.innerHTML = `
        <h4 class="font-bold mb-2">Example daily totals (illustrative)</h4>
        <table class="w-full text-sm">
          <thead><tr class="text-left text-gray-500 dark:text-slate-400"><th class="py-1">Example</th><th class="py-1">Daily</th></tr></thead>
          <tbody class="text-slate-700 dark:text-slate-200">
            <tr><td class="py-1">10 YouTube videos</td><td class="py-1">${fmt(info.payouts.youtube*10)} ${info.currency}</td></tr>
            <tr><td class="py-1">10 TikTok clips</td><td class="py-1">${fmt(info.payouts.tiktok*10)} ${info.currency}</td></tr>
            <tr><td class="py-1">5 Surveys</td><td class="py-1">${fmt(info.payouts.survey*5)} ${info.currency}</td></tr>
            <tr><td class="py-1">Invite 2 active friends</td><td class="py-1">${fmt(info.payouts.invite*2)} ${info.currency}</td></tr>
          </tbody>
        </table>`;
      host.appendChild(summary);
    }

    function exampleWa(info){
      return `Hi TrendQash, I'm in ${info.name} and want to join. Activation fee is ${fmt(info.activation)} ${info.currency}. Please guide me and confirm payout methods for my country.`;
    }

    function initChatbot() {
      const chatContainer = document.getElementById("chatContainer");
      const chatInput = document.getElementById("chatInput");
      const sendBtn = document.getElementById("chatSendBtn");

      function addMessage(sender, msg) {
        const bubble = document.createElement("div");
        bubble.className = sender === "You" ? "text-right" : "text-left";
        bubble.innerHTML = `<div class="inline-block px-4 py-2 rounded-xl ${sender === "You" ? "bg-indigo-600 text-white" : "bg-gray-700 text-gray-200"}">${msg}</div>`;
        chatContainer.appendChild(bubble);
        chatContainer.scrollTop = chatContainer.scrollHeight;
      }

      function sendChat() {
        const text = chatInput.value.trim();
        if (!text) return;
        addMessage("You", text);
        chatInput.value = "";
        setTimeout(() => {
          let reply = "ü§ñ Sorry, I don‚Äôt understand.";
          if (/join/i.test(text)) reply = "üëâ To join, select your country, pay activation fee, and start earning instantly.";
          if (/withdraw/i.test(text)) reply = "üí≥ Withdrawals are instant via mobile money or bank depending on your country.";
          if (/earn/i.test(text)) reply = "üí° You can earn through referrals, surveys, social tasks, and daily bonuses.";
          if (/legit/i.test(text)) reply = "‚úÖ Yes! TrendQash is trusted with instant payouts across Africa.";
          addMessage("Bot", reply);
        }, 800);
      }

      if (sendBtn) sendBtn.onclick = sendChat;
      if (chatInput) {
        chatInput.onkeypress = function(e) {
          if (e.key === "Enter") sendChat();
        }
      }
      $all('.quickAsk').forEach(btn => btn.onclick = () => {
        chatInput.value = btn.textContent;
        sendChat();
      });
    }
  </script>
</body>
</html>