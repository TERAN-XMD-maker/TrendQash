<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>TrendQash ‚Äî Multi-Country Portal</title>
  <meta name="description" content="TrendQash Agencies ‚Äî localized tasks, payouts, calculators, chatbot, and WhatsApp support."/>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --bg1:#0b1220; --bg2:#0e1426; --border:rgba(255,255,255,0.08);
      --white: #fff; --muted:#a5b4fc; --accent:#22d3ee; --card:#0f172a;
      --canva1:#7bdff6; --canva2:#9b7bff; --canva3:#ffd166; --canva4:#ff6b6b; --canva5:#6bffb3;
    }
    html,body{height:100%}
    body{
      margin:0; background: radial-gradient(1200px 800px at 20% -10%, #18243e 0%, transparent 60%), linear-gradient(180deg, var(--bg1), var(--bg2));
      color:#e5e7eb; font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica Neue, Arial;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    .glass{background:rgba(255,255,255,0.04); border:1px solid var(--border); backdrop-filter:blur(8px); border-radius:16px; box-shadow: 0 10px 40px rgba(0,0,0,.35)}
    .glow-ring{ position:relative }
    .glow-ring:before{ content:""; position:absolute; inset:-1px; border-radius:18px;
      padding:1px; background: conic-gradient(from 0deg, var(--canva1), var(--canva2), var(--canva3), var(--canva4), var(--canva5), var(--canva1));
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; animation:ring 6s linear infinite}
    @keyframes ring{to{transform: rotate(360deg)}}

    /* Canva-like alternating card accents */
    .canva-a{ background-image: linear-gradient(135deg, rgba(123,223,246,.18), rgba(155,123,255,.12)); }
    .canva-b{ background-image: linear-gradient(135deg, rgba(255,209,102,.18), rgba(255,107,107,.12)); }
    .canva-c{ background-image: linear-gradient(135deg, rgba(107,255,179,.18), rgba(123,223,246,.12)); }

    /* Stable popup (no drifting) */
    .popup-backdrop{ position: fixed; inset: 0; background: rgba(0,0,0,.6); display:none; align-items:center; justify-content:center; z-index:50 }
    .popup{ width:min(520px,92%); }
    .popup.show { display:flex }

    /* Slide container when switching countries */
    .slide-container{ position: relative; overflow: hidden }
    .slide-track{ will-change: transform; transition: transform .45s ease; display: flex; width: 200% }
    .slide-pane{ width: 100% }

    /* Heartbeat + moving light */
    .heartbeat{ animation: beat 1.4s ease-in-out infinite }
    @keyframes beat{ 0%,100%{transform:scale(1)} 25%{transform:scale(1.02)} 50%{transform:scale(0.98)} 75%{transform:scale(1.02)} }
    .light-sweep{ position: relative; overflow: hidden }
    .light-sweep:after{ content:""; position:absolute; top:0; left:-150%; width:50%; height:100%;
      background: linear-gradient(115deg, transparent 0%, rgba(255,255,255,.15) 45%, rgba(255,255,255,.03) 60%, transparent 100%);
      transform:skewX(-10deg); animation: sweep 3.6s linear infinite }
    @keyframes sweep{ 0%{ left:-150% } 60%{ left:130% } 100%{ left:130% } }

    /* Buttons */
    .btn{ display:inline-flex; align-items:center; gap:.5rem; font-weight:700; border-radius:12px; padding:.7rem 1rem; border:1px solid var(--border) }
    .btn-primary{ background:#0ea5e9; color:#0b1220 }
    .btn-dark{ background:#0f172a; color:#fff }
    .btn-ghost{ background:transparent; color:#e5e7eb }
    .btn-outline{ background:transparent; border-color:#334155 }

    /* Inputs */
    .input{ background: rgba(255,255,255,.04); border:1px solid var(--border); border-radius:12px; padding:.65rem .8rem; width:100%; color:#e5e7eb }

    /* Earnings card expand */
    .card{ border:1px solid var(--border); border-radius:16px; overflow:hidden }
    .card-header{ cursor:pointer; }
    .card-body{ display:none }
    .card.open .card-body{ display:block; animation: fade .25s ease }
    @keyframes fade{ from{opacity:.4; transform: translateY(-4px)} to{opacity:1; transform:none} }

    /* Chip */
    .chip{ padding:.25rem .55rem; border-radius:999px; font-size:.75rem; border:1px solid var(--border); background:rgba(255,255,255,.04); color:#cbd5e1 }

    /* Marquee (legitimacy) */
    .marquee{ overflow:hidden; white-space:nowrap }
    .marquee-track{ display:inline-block; padding-left:100%; animation: marq 18s linear infinite; color:#0b1220; font-weight:800 }
    @keyframes marq{ 0%{transform:translateX(0)} 100%{transform:translateX(-100%)} }

    /* Small tweaks */
    .muted{ color:#a3aed0 }
    .accent{ color:#22d3ee }
    .hstack{ display:flex; align-items:center; gap:.75rem }
    .vstack{ display:flex; flex-direction:column; gap:.75rem }

    /* Responsive grid helpers */
    .grid-1{ display:grid; grid-template-columns:1fr; gap:1rem }
    .grid-2{ display:grid; grid-template-columns:1fr; gap:1rem }
    .grid-3{ display:grid; grid-template-columns:1fr; gap:1rem }
    @media(min-width:640px){ .grid-2{ grid-template-columns: repeat(2, minmax(0,1fr)) } }
    @media(min-width:840px){ .grid-3{ grid-template-columns: repeat(3, minmax(0,1fr)) } }

    /* Prevent layout shift on mobile */
    * { min-width:0 }
  </style>
</head>
<body>
  <!-- Top marquee -->
  <div class="py-2">
    <div class="max-w-7xl mx-auto px-4">
      <div class="bg-white/90 rounded-full px-3 py-2 marquee">
        <div class="marquee-track">
          ‚úÖ TRENDQASH ‚Äî Registered & Compliant ‚Ä¢ Country-specific payouts ‚Ä¢ Activation from KES 550 / GHC 80 / BWP 100 / MWK 12,000 / UGX 20,000 ‚Ä¢ Weekly withdrawals ‚Ä¢ WhatsApp Support.
        </div>
      </div>
    </div>
  </div>

  <!-- Header -->
  <header class="max-w-7xl mx-auto px-4 pt-4 pb-2">
    <div class="flex items-start justify-between gap-3">
      <div>
        <h1 class="text-3xl sm:text-4xl font-extrabold">TrendQash Agencies</h1>
        <p class="text-sm muted mt-1">Localized tasks ‚Ä¢ Local payouts ‚Ä¢ Real members</p>
      </div>
      <div class="hstack">
        <button id="switchCountryBtn" class="btn btn-outline">üåç Switch Country</button>
        <button id="shareBtn" class="btn btn-primary light-sweep">üîó Share</button>
      </div>
    </div>
  </header>

  <!-- Country chooser popup -->
  <div id="countryPopup" class="popup-backdrop">
    <div class="popup glass glow-ring p-5">
      <h2 class="text-2xl font-extrabold mb-1">Select Your Country</h2>
      <p class="text-sm muted mb-4">Pick your country to see accurate activation fees, payouts, and currency.</p>
      <div class="vstack">
        <select id="countrySelect" class="input">
          <option value="">‚Äî Choose country ‚Äî</option>
          <option value="kenya">üá∞üá™ Kenya</option>
          <option value="ghana">üá¨üá≠ Ghana</option>
          <option value="botswana">üáßüáº Botswana</option>
          <option value="malawi">üá≤üáº Malawi</option>
          <option value="uganda">üá∫üá¨ Uganda</option>
        </select>
        <div class="hstack justify-between">
          <button id="chooseCountryBtn" class="btn btn-primary">Continue</button>
          <button id="cancelCountryBtn" class="btn btn-ghost">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Live members + CTA -->
  <section class="max-w-7xl mx-auto px-4 pb-4">
    <div class="glass p-4 rounded-2xl flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3">
      <div class="hstack">
        <div class="chip">Live this week</div>
        <div>Members joined: <strong id="liveCount">0</strong></div>
      </div>
      <div class="hstack">
        <a id="registerTop" target="_blank" class="btn btn-dark heartbeat light-sweep" href="https://www.trendqash.com/user/register.php?ref=Teranchamp">üöÄ How to Join & Register</a>
        <button id="openPopupBtn" class="btn btn-outline">üá∫üá≥ Choose Country</button>
      </div>
    </div>
  </section>

  <!-- Slide container (for smooth country switch) -->
  <main class="max-w-7xl mx-auto px-4 pb-16 slide-container">
    <div id="slideTrack" class="slide-track">
      <!-- current -->
      <section id="countryPaneCurrent" class="slide-pane">
        <div id="countryContent" class="vstack"></div>
      </section>
      <!-- next (for animation) -->
      <section id="countryPaneNext" class="slide-pane">
        <div id="countryContentNext" class="vstack"></div>
      </section>
    </div>
  </main>

  <!-- Footer -->
  <footer class="max-w-7xl mx-auto px-4 pb-10">
    <div class="text-center muted text-xs">
      ¬© <span id="year"></span> TrendQash Agencies ‚Ä¢ Localized earnings portal
    </div>
  </footer>
<script src="trendqash-part2a.js"></script>
<script src="trendqash-part2b.js"></script>
// trendqash-part2.js
// External script for TrendQash ‚Äî Part 2
// This file contains the full interactive JS (builders, data, chatbot, slide logic)
// It preserves all original content and adds more FAQs, bot commands, and additional testimonials.
// The script also applies runtime style fixes to ensure the country slide works across browsers.

// ------------- Safety / runtime fixes -------------
// Some older HTML splits kept .slide-pane as width:100%; ensure it behaves as flex panes here.
(function enforceSlidePaneFlex(){
  try{
    const panes = document.querySelectorAll('.slide-pane');
    panes.forEach(p=>{
      p.style.flex = '0 0 100%';
      p.style.boxSizing = 'border-box';
    });
  }catch(e){ console.warn('slide-pane fix failed', e); }
})();

// ------------- Constants & Data -------------
const SUPPORT_WA = "+254717028877";
const LIVE_START = 420;
const RATES = {
  KES: 0.0076,   // -> USD
  GHS: 0.083,
  BWP: 0.074,
  MWK: 0.00059,
  UGX: 0.00027
};

// NOTE: We intentionally keep the full original COUNTRIES object. We then extend testimonials and FAQs
// so nothing from the original is removed.
const COUNTRIES = {
  kenya: {
    key:"kenya", flag:"üá∞üá™", name:"Kenya", currency:"KES",
    activationFee: 550, rateToUSD: RATES.KES,
    payments:["M-Pesa"],
    note:"Activation is handled in the registration flow. Do not send money to WhatsApp ‚Äî it's for support only.",
    methods: {
      youtube: 50, memes: 50, tiktok: 50, surveys: 50, netflix: 50,
      referrals: 300, agent: 500, welcome: 150, ebooks: 40, forex: 0
    },
    testimonials:[
      {quote:"I earned KES 9,600 combining referrals & videos.", name:"Abigail W.", city:"Nairobi"},
      {quote:"Quick payouts and helpful support.", name:"Peter O.", city:"Nakuru"}
    ]
  },
  ghana: {
    key:"ghana", flag:"üá¨üá≠", name:"Ghana", currency:"GHS",
    activationFee: 80, rateToUSD: RATES.GHS,
    payments:["MTN MoMo","AirtelTigo Money","Vodafone Cash"],
    note:"Activation shown on the platform page. WhatsApp is support only.",
    methods: {
      youtube: 12, memes: 10, tiktok: 12, surveys: 10, netflix: 12,
      referrals: 20, agent: 8, welcome: 5, ebooks: 2, forex: 0
    },
    testimonials:[
      {quote:"MoMo cashouts hit fast!", name:"Kofi A.", city:"Accra"},
      {quote:"Clear instructions; easy side cash.", name:"Efua B.", city:"Kumasi"}
    ]
  },
  botswana: {
    key:"botswana", flag:"üáßüáº", name:"Botswana", currency:"BWP",
    activationFee: 100, rateToUSD: RATES.BWP,
    payments:["Orange Money","Mascom MyZaka"],
    note:"Follow registration instructions for activation. Support on WhatsApp only.",
    methods: {
      youtube: 18, memes: 16, tiktok: 18, surveys: 20, netflix: 18,
      referrals: 25, agent: 10, welcome: 6, ebooks: 3, forex: 0
    },
    testimonials:[
      {quote:"I cash out every week.", name:"Peter K.", city:"Gaborone"}
    ]
  },
  malawi: {
    key:"malawi", flag:"üá≤üáº", name:"Malawi", currency:"MWK",
    activationFee: 12000, rateToUSD: RATES.MWK,
    payments:["Airtel Money","TNM Mpamba"],
    note:"Activation recipient is shown in-registration. WhatsApp is for support only.",
    methods: {
      youtube: 1800, memes: 1500, tiktok: 1800, surveys: 2000, netflix: 1800,
      referrals: 3000, agent: 1200, welcome: 800, ebooks: 300, forex: 0
    },
    testimonials:[
      {quote:"Mpamba withdrawals are smooth.", name:"Grace T.", city:"Lilongwe"}
    ]
  },
  uganda: {
    key:"uganda", flag:"üá∫üá¨", name:"Uganda", currency:"UGX",
    activationFee: 20000, rateToUSD: RATES.UGX,
    payments:["MTN MoMo","Airtel Money"],
    note:"Activation details appear on the platform registration page. Support on WhatsApp.",
    methods: {
      youtube: 3500, memes: 3000, tiktok: 3500, surveys: 4000, netflix: 3500,
      referrals: 7000, agent: 5000, welcome: 2500, ebooks: 1200, forex: 0
    },
    testimonials:[
      {quote:"Surveys covered my transport costs.", name:"Sarah N.", city:"Kampala"}
    ]
  }
};

// --- Extend testimonials without removing any existing content ---
// Adding a few extra testimonials per country (keeps original array items)
(function extendTestimonials(){
  try{
    COUNTRIES.kenya.testimonials.push(
      {quote: "Payouts were on time and the team is responsive.", name: "James K.", city: "Mombasa"},
      {quote: "I use it part-time and earn extra transport cash.", name: "Lydia M.", city: "Eldoret"}
    );
    COUNTRIES.ghana.testimonials.push(
      {quote: "Easy to use and MoMo payouts are fast.", name: "Nana Y.", city: "Tema"}
    );
    COUNTRIES.botswana.testimonials.push(
      {quote: "Solid side income, recommended.", name: "Mpho L.", city: "Gaborone"}
    );
    COUNTRIES.malawi.testimonials.push(
      {quote: "Good for students and part-timers.", name: "Tom M.", city: "Zomba"}
    );
    COUNTRIES.uganda.testimonials.push(
      {quote: "Support helped me through my first withdrawal.", name: "Grace K.", city: "Kampala"}
    );
  }catch(e){ console.warn('extendTestimonials failed', e); }
})();

// ----- Helpers -----
const $ = (s, r=document)=> r.querySelector(s);
const $$ = (s, r=document)=> Array.from(r.querySelectorAll(s));
const fmt = (n)=> Number(n||0).toLocaleString();
const escapeHtml = (s)=> String(s).replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));

// Extra: a small logger for debugging in console (safe to remove in production)
function log(...args){ if(window && window.console) console.log('[TrendQash]', ...args); }

// ----- Live counter -----
let liveCounter = LIVE_START;
function tickLiveCounter(){
  liveCounter += Math.floor(Math.random()*3);
  const el = $("#liveCount");
  if(el) el.textContent = fmt(liveCounter);
}

// ---------- Builders (copied and preserved original content) ----------
function buildHero(cfg){
  const el = document.createElement("section");
  el.className = "glass canva-a p-5 rounded-2xl vstack";
  el.innerHTML = `
    <div class="flex items-start justify-between gap-3 flex-wrap">
      <div>
        <h2 class="text-2xl sm:text-3xl font-extrabold">${cfg.flag} ${cfg.name} ‚Äî Start Earning Today</h2>
        <p class="text-sm muted mt-1">Activation: <strong>${cfg.currency} ${fmt(cfg.activationFee)}</strong> ‚Ä¢ Payments: ${cfg.payments.join(", ")}</p>
      </div>
      <div class="hstack">
        <a class="btn btn-dark heartbeat light-sweep" href="https://www.trendqash.com/user/register.php?ref=Teranchamp" target="_blank">Register Now</a>
        <button class="btn btn-outline" id="scrollToHow">How it works</button>
      </div>
    </div>
    <div class="text-xs muted">Note: ${cfg.note}</div>
  `;
  el.querySelector("#scrollToHow").addEventListener("click", ()=> {
    const t = document.getElementById("howToJoin");
    if(t) t.scrollIntoView({behavior:"smooth", block:"start"});
  });
  return el;
}

function buildBusiness(cfg){
  const el = document.createElement("section");
  el.className = "glass p-5 rounded-2xl grid-3";
  el.innerHTML = `
    <div class="card canva-b p-4">
      <div class="text-xs muted">Activation Fee</div>
      <div class="text-xl font-bold">${cfg.currency} ${fmt(cfg.activationFee)}</div>
    </div>
    <div class="card p-4">
      <div class="text-xs muted">Payment Methods</div>
      <div class="font-semibold">${cfg.payments.join(", ")}</div>
    </div>
    <div class="card p-4">
      <div class="text-xs muted">Support</div>
      <div>WhatsApp: <strong>${SUPPORT_WA}</strong> (support only)</div>
    </div>
  `;
  return el;
}

// Earning method card
function buildMethodCard(cfg, id, label, icon, desc){
  const rate = cfg.methods[id] ?? 0;
  const el = document.createElement("div");
  el.className = "card glass p-0 overflow-hidden";
  const cardId = `${cfg.key}_${id}`;

  el.innerHTML = `
    <div class="card-header canva-c p-4 flex items-start justify-between">
      <div class="flex items-start gap-3">
        <div class="text-2xl">${icon}</div>
        <div>
          <div class="text-lg font-bold">${label}</div>
          <div class="text-sm muted">${desc}</div>
        </div>
      </div>
      <div class="text-right">
        <div class="text-xs muted">Pays</div>
        <div class="font-bold">${cfg.currency} ${fmt(rate)}</div>
      </div>
    </div>

    <div class="card-body p-4">
      <div class="text-sm leading-relaxed mb-3" id="${cardId}_detail"></div>
      <div class="grid-2">
        <div>
          <label class="text-sm">Quantity</label>
          <input id="${cardId}_qty" type="number" min="0" class="input mt-1" placeholder="e.g. 10"/>
        </div>
        <div>
          <label class="text-sm">Result</label>
          <div id="${cardId}_out" class="input mt-1 bg-transparent"></div>
        </div>
      </div>
      <div class="hstack mt-3">
        <button class="btn btn-dark" data-calc="${id}">Calculate</button>
        <button class="btn btn-ghost" data-clear="${id}">Clear</button>
      </div>
    </div>
  `;

  // Fill detailed explanation
  const detail = `
    ${detailTextFor(id, cfg)}
    <div class="mt-2 text-xs muted">Auto-convert: ${cfg.currency} ‚Üí USD at ~${cfg.rateToUSD} / unit currency.</div>
  `;
  el.querySelector(`#${cardId}_detail`).innerHTML = detail;

  // Toggle open/close
  const header = el.querySelector(".card-header");
  header.addEventListener("click", ()=>{
    el.classList.toggle("open");
  });

  // Buttons
  el.querySelector("[data-calc]").addEventListener("click", ()=>{
    const qty = Number((document.getElementById(`${cardId}_qty`).value || 0));
    let payout = rate * qty;
    // special cases
    if(id==="welcome"){ payout = rate; }
    const usd = payout * cfg.rateToUSD;
    document.getElementById(`${cardId}_out`).textContent = `${cfg.currency} ${fmt(payout)} (~$${usd.toFixed(2)})`;
  });
  el.querySelector("[data-clear]").addEventListener("click", ()=>{
    const q = document.getElementById(`${cardId}_qty`);
    const o = document.getElementById(`${cardId}_out`);
    if(q) q.value = "";
    if(o) o.textContent = "";
  });

  return el;
}

function detailTextFor(id, cfg){
  const c = cfg.currency;
  const r = (k)=> cfg.methods[k] ?? 0;
  switch(id){
    case "youtube":
      return `Watch promoted YouTube videos (2‚Äì5 minutes each) and confirm completion. Example: 10 videos/day √ó ${c} ${fmt(r("youtube"))} = ${c} ${fmt(10*r("youtube"))}. Tip: do them in batches morning/evening.`;
    case "memes":
      return `View or help categorize memes for engagement tests. Each approved meme pays ${c} ${fmt(r("memes"))}. Keep content appropriate; low-quality entries may be rejected.`;
    case "tiktok":
      return `Watch TikTok clips and confirm. Short-form tasks with quick turnover. Example: 20 clips = ${c} ${fmt(20*r("tiktok"))}.`;
    case "surveys":
      return `Answer short local surveys (1‚Äì3 minutes). Honest answers only. ${c} ${fmt(r("surveys"))} each.`;
    case "netflix":
      return `Click/preview Netflix-style promos and record feedback. ${c} ${fmt(r("netflix"))} per ad.`;
    case "referrals":
      return `Invite friends. Each direct referral pays ${c} ${fmt(r("referrals"))}. Example: 5 invites/day = ${c} ${fmt(5*r("referrals"))}.`;
    case "agent":
      return `Agent ranking tasks: verify simple steps for new members. ${c} ${fmt(r("agent"))} per verification.`;
    case "welcome":
      return `One-time welcome bonus of ${c} ${fmt(r("welcome"))} after activation. Enter "1" as quantity to simulate (or leave blank; calculator will show fixed reward).`;
    case "ebooks":
      return `Get access to eBooks & entertainment perks. This is a periodic benefit valued at ~${c} ${fmt(r("ebooks"))}.`;
    case "forex":
      return `Learn basics of Forex with beginner materials. This is an educational perk; not a paid task.`;
    default:
      return `Task details coming soon.`;
  }
}

function buildWaysGrid(cfg){
  const el = document.createElement("section");
  el.className = "glass p-5 rounded-2xl";
  el.innerHTML = `<h3 class="text-xl font-extrabold mb-3">Ways to Earn ‚Äî Interactive</h3>`;
  const grid = document.createElement("div");
  grid.className = "grid-2";

  const methods = [
    ["youtube","YouTube Videos","üé•","Watch longer videos & confirm."],
    ["memes","Memes","üéâ","Engagement testing with memes."],
    ["tiktok","TikTok Videos","üéµ","Short clip viewing & confirm."],
    ["surveys","Surveys","üìù","Answer quick local surveys."],
    ["netflix","Netflix Ads","üé¨","Preview & give feedback."],
    ["referrals","Referrals","ü§ù","Invite friends to earn."],
    ["agent","Agent Ranking","üèÜ","Verify steps for new members."],
    ["welcome","Welcome Bonus","üéÅ","One-time bonus after activation."],
    ["ebooks","eBooks/Benefits","üìö","Entertainment/library perks."],
    ["forex","Learn Forex","üìà","Educational materials for basics."]
  ];

  methods.forEach(([id, label, icon, brief], i)=>{
    const card = buildMethodCard(cfg, id, label, icon, brief);
    // Alternate subtle canva backgrounds
    if(i%3===0) card.classList.add("canva-a"); else if(i%3===1) card.classList.add("canva-b"); else card.classList.add("canva-c");
    grid.appendChild(card);
  });

  el.appendChild(grid);
  return el;
}

function buildTable(cfg){
  const el = document.createElement("section");
  el.className = "glass p-5 rounded-2xl";
  const rows = [
    ["YouTube", cfg.methods.youtube],
    ["Memes", cfg.methods.memes],
    ["TikTok", cfg.methods.tiktok],
    ["Surveys", cfg.methods.surveys],
    ["Netflix Ads", cfg.methods.netflix],
    ["Referrals (each)", cfg.methods.referrals],
    ["Agent Ranking", cfg.methods.agent],
    ["Welcome Bonus", cfg.methods.welcome],
    ["eBooks/Benefits", cfg.methods.ebooks]
  ].map(([k,v])=>`<tr><td class="p-3">${k}</td><td class="p-3 font-semibold">${cfg.currency} ${fmt(v)}</td></tr>`).join("");

  el.innerHTML = `
    <h3 class="text-xl font-extrabold mb-3">Payout Table ‚Äî ${cfg.flag} ${cfg.name}</h3>
    <div class="overflow-x-auto">
      <table class="w-full text-left">
        <thead><tr class="border-b border-slate-700/40">
          <th class="p-3">Method</th><th class="p-3">Reward</th>
        </tr></thead>
        <tbody class="text-sm">${rows}</tbody>
      </table>
    </div>
  `;
  return el;
}

// Build an enriched FAQ block that preserves the original short set and appends more items
function buildFAQ(cfg){
  const base = [
    ["How do I register?","Open the registration link and follow the steps. Activation fee: "+cfg.currency+" "+fmt(cfg.activationFee)+"."],
    ["How do I withdraw?","Withdrawals are processed weekly via your chosen local method."],
    ["Is this legit?","Yes ‚Äî TrendQash is registered and pays out weekly. See testimonials."],
    ["Support?","WhatsApp "+SUPPORT_WA+" (support only; do not send payments)."]
  ];

  // additional helpful questions ‚Äî appended to keep original content
  const additional = [
    ["Activation fee ‚Äî where to pay?","Payment instructions and the recipient are shown in the registration flow. We never accept payments over WhatsApp."],
    ["What payment methods are available?","Payment channels differ by country (M-Pesa, MTN MoMo, Airtel, Orange Money, Mpamba). See the Payments card."],
    ["How long until I see my funds?","Tasks validated quickly; withdrawals are batched weekly and may take up to 7 business days depending on the provider."],
    ["Do I need ID or KYC?","Basic verification may be requested for larger withdrawals or agent payouts. The platform will notify you if KYC is required."],
    ["Referral payments ‚Äî when?","Referral rewards post after the referred member completes activation and the initial verification step."],
    ["Privacy & data?","We only store minimal information needed to pay you and support your account. See our privacy policy on the main platform."]
  ];

  const data = base.concat(additional);

  const el = document.createElement("section");
  el.className = "glass p-5 rounded-2xl";
  el.innerHTML = `<h3 class="text-xl font-extrabold mb-3">Frequently Asked Questions</h3>
    <div id="${cfg.key}_faq" class="vstack"></div>`;
  const host = el.querySelector(`#${cfg.key}_faq`);
  data.forEach(([q,a],i)=>{
    const item = document.createElement("div");
    item.className = "card";
    item.innerHTML = `
      <button class="w-full text-left p-3 flex items-center justify-between card-header"><span class="font-semibold">${q}</span><span>+</span></button>
      <div class="card-body p-3 text-sm muted">${a}</div>`;
    item.querySelector(".card-header").addEventListener("click", ()=> item.classList.toggle("open"));
    host.appendChild(item);
  });
  return el;
}

function buildHowToJoin(cfg){
  const el = document.createElement("section");
  el.id = "howToJoin";
  el.className = "glass p-5 rounded-2xl canva-b";
  el.innerHTML = `
    <h3 class="text-xl font-extrabold mb-3">How to Join ‚Äî ${cfg.flag} ${cfg.name}</h3>
    <ol class="list-decimal pl-5 space-y-2 text-sm">
      <li>Tap <strong>Register</strong> and create your account.</li>
      <li>Pay the <strong>activation fee</strong>: ${cfg.currency} ${fmt(cfg.activationFee)} (shown within the platform).</li>
      <li>Open the <strong>Tasks</strong> page and start completing methods you like.</li>
      <li>Withdraw weekly to your local method: ${cfg.payments.join(", ")}.</li>
    </ol>
    <div class="hstack mt-4">
      <a class="btn btn-dark heartbeat light-sweep" target="_blank" href="https://www.trendqash.com/user/register.php?ref=Teranchamp">üöÄ Register Now</a>
      <button id="${cfg.key}_share2" class="btn btn-outline">üîó Share this to a friend</button>
    </div>
  `;
  // share (secondary)
  setTimeout(()=>{
    const b = document.getElementById(`${cfg.key}_share2`);
    if(b) b.addEventListener("click", shareSite);
  },0);
  return el;
}

function buildChatAndWhatsApp(cfg){
  const el = document.createElement("section");
  el.className = "glass p-5 rounded-2xl";
  el.innerHTML = `
    <h3 class="text-xl font-extrabold mb-3">Support ‚Äî Chat & WhatsApp</h3>
    <div class="grid-2">
      <div class="card p-0 overflow-hidden">
        <div class="p-3 border-b border-slate-700/40 font-semibold">Chatbot</div>
        <div id="${cfg.key}_messages" class="h-56 overflow-y-auto p-3 text-sm space-y-2 bg-black/10"></div>
        <div class="p-3 hstack">
          <input id="${cfg.key}_chat_in" class="input flex-1" placeholder="Ask about registration, withdrawals, earnings..."/>
          <button class="btn btn-dark" data-send>Send</button>
        </div>
        <div class="p-3 hstack text-xs muted">
          <button class="chip" data-quick="register">How to register?</button>
          <button class="chip" data-quick="withdraw">How to withdraw?</button>
          <button class="chip" data-quick="earn">Ways to earn</button>
          <button class="chip" data-quick="activation">Activation fee</button>
          <button class="chip" data-quick="payments">Payment methods</button>
          <button class="chip" data-quick="testimonials">Testimonials</button>
          <button class="chip" data-quick="support">Contact support</button>
        </div>
      </div>

      <div class="card p-0 overflow-hidden">
        <div class="p-3 border-b border-slate-700/40 font-semibold">WhatsApp Support</div>
        <div class="p-3">
          <label class="text-sm">Compose message</label>
          <textarea id="${cfg.key}_wa_msg" rows="5" class="input mt-1">Hi, I'm interested in TrendQash ${cfg.name}. My name is [Your Name]. My number: [Your Number]. Please guide me on registration and payouts.</textarea>
          <div class="hstack mt-3">
            <button class="btn btn-primary heartbeat light-sweep" data-open-wa>Open WhatsApp</button>
            <button class="btn btn-ghost" data-fill-example>Use Example</button>
          </div>
          <p class="text-xs muted mt-2">Note: WhatsApp <strong>${SUPPORT_WA}</strong> is support-only ‚Äî do not send payments there.</p>
        </div>
      </div>
    </div>
  `;

  // Init chatbot welcome
  const box = el.querySelector(`#${cfg.key}_messages`);
  if(box){
    box.insertAdjacentHTML("beforeend",
      `<div class="p-2 rounded bg-white/5">üëã Hi! I can help with <em>registration</em>, <em>withdrawals</em>, and <em>earnings</em>. Try the quick buttons below, or type a question.</div>`);
  }

  // Chat events
  el.querySelector("[data-send]").addEventListener("click", ()=> sendChat(cfg.key));
  el.querySelectorAll("[data-quick]").forEach(b=>{
    b.addEventListener("click", ()=>{
      const t = b.getAttribute("data-quick");
      const input = document.getElementById(`${cfg.key}_chat_in`);
      if(!input) return;
      input.value = (t==="register"?"How to register?": t==="withdraw"?"How to withdraw?": t==="activation"?"What's the activation fee?": t==="payments"?"What payment methods?": t==="testimonials"?"Show testimonials":"What are the ways to earn?");
      sendChat(cfg.key);
    });
  });

  // WhatsApp events
  el.querySelector("[data-open-wa]").addEventListener("click", ()=> openWhatsApp(cfg.key));
  el.querySelector("[data-fill-example]").addEventListener("click", ()=> copyExample(cfg.key));

  return el;
}

function buildTestimonials(cfg){
  const el = document.createElement("section");
  el.className = "glass p-5 rounded-2xl";
  const slides = (cfg.testimonials||[]).map(t=>`
    <div class="min-w-full p-4">
      <p class="italic">‚Äú${t.quote}‚Äù</p>
      <div class="mt-2 text-sm muted">‚Äî ${t.name}, ${t.city}</div>
    </div>`).join("");
  el.innerHTML = `
    <h3 class="text-xl font-extrabold mb-3">Member Testimonials ‚Äî ${cfg.flag} ${cfg.name}</h3>
    <div class="relative overflow-hidden rounded-lg">
      <div id="${cfg.key}_ttrack" class="flex transition-transform duration-700">${slides}</div>
      <button class="absolute left-3 top-1/2 -translate-y-1/2 btn btn-ghost" data-ts-prev>‚Äπ</button>
      <button class="absolute right-3 top-1/2 -translate-y-1/2 btn btn-ghost" data-ts-next>‚Ä∫</button>
      <div id="${cfg.key}_tdots" class="absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2"></div>
    </div>`;
  // init
  setTimeout(()=> initTestimonialAuto(cfg.key, cfg), 0);
  return el;
}

// ---------- Rendering ----------
let selectedCountry = "kenya"; // default
function renderCountryPage(key, host){
  const cfg = COUNTRIES[key];
  host.innerHTML = "";
  host.appendChild(buildHero(cfg));
  host.appendChild(buildBusiness(cfg));
  host.appendChild(buildWaysGrid(cfg));
  host.appendChild(buildTable(cfg));
  host.appendChild(buildFAQ(cfg));
  host.appendChild(buildHowToJoin(cfg));
  host.appendChild(buildChatAndWhatsApp(cfg));
  host.appendChild(buildTestimonials(cfg));
}

// ---------- Testimonials carousel ----------
const TestState = {};
function initTestimonialAuto(key, cfg){
  const track = document.getElementById(`${key}_ttrack`);
  const dots = document.getElementById(`${key}_tdots`);
  if(!track || !dots) return;
  const count = (cfg.testimonials||[]).length || 1;
  dots.innerHTML = "";
  for(let i=0;i<count;i++){
    const d=document.createElement("div");
    d.className="w-2.5 h-2.5 rounded-full bg-white/30"+(i===0?" ring-2 ring-white":"");
    d.dataset.i=i; d.onclick=()=>{ TestState[key].idx=i; sync(); };
    dots.appendChild(d);
  }
  TestState[key] = { idx:0, count };
  function sync(){
    track.style.transform = `translateX(-${TestState[key].idx*100}%)`;
    Array.from(dots.children).forEach((el,i)=> {
      el.classList.toggle("ring-2", i===TestState[key].idx);
      el.classList.toggle("ring-white", i===TestState[key].idx);
    });
  }
  TestState[key].timer = setInterval(()=>{ TestState[key].idx = (TestState[key].idx+1)%count; sync(); }, 4200);
  const prevBtn = track.parentElement.querySelector("[data-ts-prev]");
  const nextBtn = track.parentElement.querySelector("[data-ts-next]");
  prevBtn.addEventListener("click", ()=>{ TestState[key].idx = (TestState[key].idx-1+count)%count; sync(); });
  nextBtn.addEventListener("click", ()=>{ TestState[key].idx = (TestState[key].idx+1)%count; sync(); });
}

// ---------- Enhanced Chatbot ----------
// The bot responds to more keywords and supports small command-like phrases.
function sendChat(countryKey){
  const inEl = document.getElementById(`${countryKey}_chat_in`);
  const box = document.getElementById(`${countryKey}_messages`);
  const txt = (inEl?.value||"").trim();
  if(!txt) return;
  // user bubble
  box.insertAdjacentHTML("beforeend", `<div class="flex justify-end"><div class="px-3 py-2 rounded bg-sky-600 text-white">${escapeHtml(txt)}</div></div>`);
  inEl.value=""; box.scrollTop = box.scrollHeight;

  const cfg = COUNTRIES[countryKey];
  const lc = txt.toLowerCase();
  let reply = `Hi ‚Äî ask about registration, withdrawals, or ways to earn.`;

  // keyword-based routing (keeps original responses and adds more)
  if(lc.includes("register") || lc.includes("join") || lc.includes("how to register")){
    reply = `To register: open the link, create your account, and pay the activation fee of ${cfg.currency} ${fmt(cfg.activationFee)}. Then start tasks.`;
  } else if(lc.includes("withdraw") || lc.includes("payout") || lc.includes("how to withdraw")){
    reply = `Withdrawals are processed weekly to: ${cfg.payments.join(", ")}. Check your dashboard for steps and minimums.`;
  } else if(lc.includes("earn") || lc.includes("payouts") || lc.includes("ways to earn")){
    const m = cfg.methods;
    reply = `Top payouts per task: YouTube ${cfg.currency} ${fmt(m.youtube)}, TikTok ${fmt(m.tiktok)}, Surveys ${fmt(m.surveys)}, Referrals ${fmt(m.referrals)} each. Use the calculators inside each card.`;
  } else if(lc.includes("referral") || lc.includes("refer")){
    reply = `Invite friends with your link. Each direct referral pays ${cfg.currency} ${fmt(cfg.methods.referrals)} after activation.`;
  } else if(lc.includes("activation") || lc.includes("fee")){
    reply = `Activation fee for ${cfg.name}: ${cfg.currency} ${fmt(cfg.activationFee)}. The exact steps and recipient are shown during registration.`;
  } else if(lc.includes("payment") || lc.includes("method") || lc.includes("momo") || lc.includes("mpesa") || lc.includes("mpesa")){
    reply = `Available payment methods: ${cfg.payments.join(", ")}. Some providers may have minimums.`;
  } else if(lc.includes("testimonial") || lc.includes("legit") || lc.includes("trust") || lc.includes("is this legit")){
    reply = `See member testimonials on the page. Several members report weekly payouts; contact support if you have doubts.`;
  } else if(lc.includes("support") || lc.includes("contact")){
    reply = `Contact support via WhatsApp: ${SUPPORT_WA} (support-only). Use the message composer here so support receives your account context.`;
  } else if(lc.includes("calculator") || lc.includes("how much") || lc.match(/\d+/)){
    reply = `Use the calculators in each "Ways to Earn" card: open a method, enter quantity, then tap Calculate. That will show local currency and approximate USD.`;
  } else if(lc.includes("hello") || lc.includes("hi") || lc.includes("hey")){
    reply = `Hello! I can help with registration, withdrawals, payouts, and referrals. Try asking "How to register?" or tap one of the quick buttons.`;
  }

  setTimeout(()=>{
    box.insertAdjacentHTML("beforeend", `<div class="mt-2"><div class="px-3 py-2 rounded bg-white/5">${reply}</div></div>`);
    box.scrollTop = box.scrollHeight;
  }, 300);
}

// ---------- WhatsApp ----------
function openWhatsApp(countryKey){
  const ta = document.getElementById(`${countryKey}_wa_msg`);
  const msg = (ta?.value||"").trim();
  if(!msg) return alert("Type a message first.");
  const phone = SUPPORT_WA.replace(/\+| /g,"");
  window.open(`https://wa.me/${phone}?text=${encodeURIComponent(msg)}`, "_blank");
}
function copyExample(countryKey){
  const ta = document.getElementById(`${countryKey}_wa_msg`);
  if(ta) ta.value = `Hi, I'm interested in TrendQash ${COUNTRIES[countryKey].name}. My name is [Your Name]. My number: [Your Number]. Please guide me on registration and payouts.`;
}

// ---------- Share ----------
async function shareSite(){
  const shareData = {
    title: "TrendQash Agencies ‚Äî Earn from local tasks",
    text: "Try TrendQash: watch videos, memes, surveys, referrals ‚Äî localized payouts & weekly withdrawals.",
    url: location.href
  };
  try{
    if(navigator.share){ await navigator.share(shareData); }
    else{
      await navigator.clipboard.writeText(`${shareData.text}\n${shareData.url}`);
      alert("Link copied! Share it with your friends.");
    }
  }catch(e){ /* user canceled */ }
}

// ---------- Country Popup wiring (preserve existing behavior and add select change quick-switch) ----------
const popup = document.getElementById("countryPopup");
const selectEl = document.getElementById("countrySelect");
// safeguard: some pages may not have the popup DOM (defensive)
if(document.getElementById("openPopupBtn")) document.getElementById("openPopupBtn").addEventListener("click", ()=> popup.classList.add("show"));
if(document.getElementById("switchCountryBtn")) document.getElementById("switchCountryBtn").addEventListener("click", ()=> popup.classList.add("show"));
if(document.getElementById("cancelCountryBtn")) document.getElementById("cancelCountryBtn").addEventListener("click", ()=> popup.classList.remove("show"));
if(document.getElementById("chooseCountryBtn")) document.getElementById("chooseCountryBtn").addEventListener("click", ()=>{
  const val = selectEl.value;
  if(!val || !COUNTRIES[val]) return alert("Please select a country.");
  popup.classList.remove("show");
  setCountry(val, true);
});

// support quick-switch directly from the <select>
if(selectEl){
  selectEl.addEventListener('change', ()=>{
    const val = selectEl.value;
    if(val && COUNTRIES[val]){ popup.classList.remove('show'); setCountry(val, true); }
  });
}

// ---------- Slide switch (improved) ----------
const track = document.getElementById("slideTrack");
function setCountry(key, animate=false){
  if(!COUNTRIES[key]) return;
  localStorage.setItem("selectedCountry", key);
  selectedCountry = key;

  const nextHost = document.getElementById("countryContentNext");
  renderCountryPage(key, nextHost);

  if(animate && track){
    // slide in next
    track.style.transition = "transform .45s ease";
    // ensure layout styles for panes
    Array.from(track.children).forEach(p=>{ p.style.flex = '0 0 100%'; });
    requestAnimationFrame(()=>{ track.style.transform = "translateX(-50%)"; });

    track.addEventListener("transitionend", onDone, { once:true });
    function onDone(){
      const curHost = document.getElementById("countryContent");
      // move nodes to preserve event listeners
      while(nextHost.firstChild){ curHost.appendChild(nextHost.firstChild); }

      // reset track
      track.style.transition = "none";
      track.style.transform = "translateX(0)";
      void track.offsetHeight; // reflow
      track.style.transition = "transform .45s ease";
      updateHeaderForCountry();
    }
  }else{
    const curHost = document.getElementById("countryContent");
    renderCountryPage(key, curHost);
    updateHeaderForCountry();
  }
}
function updateHeaderForCountry(){
  const cfg = COUNTRIES[selectedCountry];
  const regTop = document.getElementById("registerTop");
  if(regTop) regTop.textContent = `üöÄ Join ${cfg.name} ‚Äî ${cfg.currency} ${fmt(cfg.activationFee)}`;
}

// ---------- Init ----------
(function init(){
  try{
    document.getElementById("year").textContent = new Date().getFullYear();
    const sb = document.getElementById("shareBtn"); if(sb) sb.addEventListener("click", shareSite);
    setInterval(tickLiveCounter, 4500); tickLiveCounter();

    // restore saved country
    const saved = localStorage.getItem("selectedCountry");
    const initial = (saved && COUNTRIES[saved]) ? saved : "kenya";
    // preselect in popup
    const sel = document.getElementById("countrySelect");
    if(sel) sel.value = initial;

    renderCountryPage(initial, document.getElementById("countryContent"));
    updateHeaderForCountry();
  }catch(e){ console.error('init failed', e); }
})();

// End of trendqash-part2.js

  <script>
  // ------------- Constants & Data -------------
  const SUPPORT_WA = "+254717028877";
  const LIVE_START = 420;
  const RATES = {
    KES: 0.0076,   // -> USD
    GHS: 0.083,
    BWP: 0.074,
    MWK: 0.00059,
    UGX: 0.00027
  };

  // Country configs with per-method payouts
  // Methods: youtube, memes, tiktok, surveys, netflix, referrals, agent, welcome, ebooks, forex
  const COUNTRIES = {
    kenya: {
      key:"kenya", flag:"üá∞üá™", name:"Kenya", currency:"KES",
      activationFee: 550, rateToUSD: RATES.KES,
      payments:["M-Pesa"],
      note:"Activation is handled in the registration flow. Do not send money to WhatsApp ‚Äî it's for support only.",
      methods: {
        youtube: 50, memes: 50, tiktok: 50, surveys: 50, netflix: 50,
        referrals: 300, agent: 500, welcome: 150, ebooks: 40, forex: 0
      },
      testimonials:[
        {quote:"I earned KES 9,600 combining referrals & videos.", name:"Abigail W.", city:"Nairobi"},
        {quote:"Quick payouts and helpful support.", name:"Peter O.", city:"Nakuru"}
      ]
    },
    ghana: {
      key:"ghana", flag:"üá¨üá≠", name:"Ghana", currency:"GHS",
      activationFee: 80, rateToUSD: RATES.GHS,
      payments:["MTN MoMo","AirtelTigo Money","Vodafone Cash"],
      note:"Activation shown on the platform page. WhatsApp is support only.",
      methods: {
        youtube: 12, memes: 10, tiktok: 12, surveys: 10, netflix: 12,
        referrals: 20, agent: 8, welcome: 5, ebooks: 2, forex: 0
      },
      testimonials:[
        {quote:"MoMo cashouts hit fast!", name:"Kofi A.", city:"Accra"},
        {quote:"Clear instructions; easy side cash.", name:"Efua B.", city:"Kumasi"}
      ]
    },
    botswana: {
      key:"botswana", flag:"üáßüáº", name:"Botswana", currency:"BWP",
      activationFee: 100, rateToUSD: RATES.BWP,
      payments:["Orange Money","Mascom MyZaka"],
      note:"Follow registration instructions for activation. Support on WhatsApp only.",
      methods: {
        youtube: 18, memes: 16, tiktok: 18, surveys: 20, netflix: 18,
        referrals: 25, agent: 10, welcome: 6, ebooks: 3, forex: 0
      },
      testimonials:[
        {quote:"I cash out every week.", name:"Peter K.", city:"Gaborone"}
      ]
    },
    malawi: {
      key:"malawi", flag:"üá≤üáº", name:"Malawi", currency:"MWK",
      activationFee: 12000, rateToUSD: RATES.MWK,
      payments:["Airtel Money","TNM Mpamba"],
      note:"Activation recipient is shown in-registration. WhatsApp is for support only.",
      methods: {
        youtube: 1800, memes: 1500, tiktok: 1800, surveys: 2000, netflix: 1800,
        referrals: 3000, agent: 1200, welcome: 800, ebooks: 300, forex: 0
      },
      testimonials:[
        {quote:"Mpamba withdrawals are smooth.", name:"Grace T.", city:"Lilongwe"}
      ]
    },
    uganda: {
      key:"uganda", flag:"üá∫üá¨", name:"Uganda", currency:"UGX",
      activationFee: 20000, rateToUSD: RATES.UGX,
      payments:["MTN MoMo","Airtel Money"],
      note:"Activation details appear on the platform registration page. Support on WhatsApp.",
      methods: {
        youtube: 3500, memes: 3000, tiktok: 3500, surveys: 4000, netflix: 3500,
        referrals: 7000, agent: 5000, welcome: 2500, ebooks: 1200, forex: 0
      },
      testimonials:[
        {quote:"Surveys covered my transport costs.", name:"Sarah N.", city:"Kampala"}
      ]
    }
  };

  // ----- Helpers -----
  const $ = (s, r=document)=> r.querySelector(s);
  const $$ = (s, r=document)=> Array.from(r.querySelectorAll(s));
  const fmt = (n)=> Number(n||0).toLocaleString();
  const escapeHtml = (s)=> String(s).replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));

  // ----- Live counter -----
  let liveCounter = LIVE_START;
  function tickLiveCounter(){
    liveCounter += Math.floor(Math.random()*3);
    const el = $("#liveCount");
    if(el) el.textContent = fmt(liveCounter);
  }

  // ---------- Builders ----------
  function buildHero(cfg){
    const el = document.createElement("section");
    el.className = "glass canva-a p-5 rounded-2xl vstack";
    el.innerHTML = `
      <div class="flex items-start justify-between gap-3 flex-wrap">
        <div>
          <h2 class="text-2xl sm:text-3xl font-extrabold">${cfg.flag} ${cfg.name} ‚Äî Start Earning Today</h2>
          <p class="text-sm muted mt-1">Activation: <strong>${cfg.currency} ${fmt(cfg.activationFee)}</strong> ‚Ä¢ Payments: ${cfg.payments.join(", ")}</p>
        </div>
        <div class="hstack">
          <a class="btn btn-dark heartbeat light-sweep" href="https://www.trendqash.com/user/register.php?ref=Teranchamp" target="_blank">Register Now</a>
          <button class="btn btn-outline" id="scrollToHow">How it works</button>
        </div>
      </div>
      <div class="text-xs muted">Note: ${cfg.note}</div>
    `;
    el.querySelector("#scrollToHow").addEventListener("click", ()=> {
      const t = document.getElementById("howToJoin");
      if(t) t.scrollIntoView({behavior:"smooth", block:"start"});
    });
    return el;
  }

  function buildBusiness(cfg){
    const el = document.createElement("section");
    el.className = "glass p-5 rounded-2xl grid-3";
    el.innerHTML = `
      <div class="card canva-b p-4">
        <div class="text-xs muted">Activation Fee</div>
        <div class="text-xl font-bold">${cfg.currency} ${fmt(cfg.activationFee)}</div>
      </div>
      <div class="card p-4">
        <div class="text-xs muted">Payment Methods</div>
        <div class="font-semibold">${cfg.payments.join(", ")}</div>
      </div>
      <div class="card p-4">
        <div class="text-xs muted">Support</div>
        <div>WhatsApp: <strong>${SUPPORT_WA}</strong> (support only)</div>
      </div>
    `;
    return el;
  }

  // Earning method card
  function buildMethodCard(cfg, id, label, icon, desc){
    const rate = cfg.methods[id] ?? 0;
    const el = document.createElement("div");
    el.className = "card glass p-0 overflow-hidden";
    const cardId = `${cfg.key}_${id}`;

    el.innerHTML = `
      <div class="card-header canva-c p-4 flex items-start justify-between">
        <div class="flex items-start gap-3">
          <div class="text-2xl">${icon}</div>
          <div>
            <div class="text-lg font-bold">${label}</div>
            <div class="text-sm muted">${desc}</div>
          </div>
        </div>
        <div class="text-right">
          <div class="text-xs muted">Pays</div>
          <div class="font-bold">${cfg.currency} ${fmt(rate)}</div>
        </div>
      </div>

      <div class="card-body p-4">
        <div class="text-sm leading-relaxed mb-3" id="${cardId}_detail"></div>
        <div class="grid-2">
          <div>
            <label class="text-sm">Quantity</label>
            <input id="${cardId}_qty" type="number" min="0" class="input mt-1" placeholder="e.g. 10"/>
          </div>
          <div>
            <label class="text-sm">Result</label>
            <div id="${cardId}_out" class="input mt-1 bg-transparent"></div>
          </div>
        </div>
        <div class="hstack mt-3">
          <button class="btn btn-dark" data-calc="${id}">Calculate</button>
          <button class="btn btn-ghost" data-clear="${id}">Clear</button>
        </div>
      </div>
    `;

    // Fill detailed explanation
    const detail = `
      ${detailTextFor(id, cfg)}
      <div class="mt-2 text-xs muted">Auto-convert: ${cfg.currency} ‚Üí USD at ~${cfg.rateToUSD} / unit currency.</div>
    `;
    el.querySelector(`#${cardId}_detail`).innerHTML = detail;

    // Toggle open/close
    const header = el.querySelector(".card-header");
    header.addEventListener("click", ()=>{
      el.classList.toggle("open");
    });

    // Buttons
    el.querySelector("[data-calc]").addEventListener("click", ()=>{
      const qty = Number((document.getElementById(`${cardId}_qty`).value || 0));
      let payout = rate * qty;
      // special cases
      if(id==="welcome"){ payout = rate; }
      const usd = payout * cfg.rateToUSD;
      document.getElementById(`${cardId}_out`).textContent = `${cfg.currency} ${fmt(payout)} (~$${usd.toFixed(2)})`;
    });
    el.querySelector("[data-clear]").addEventListener("click", ()=>{
      const q = document.getElementById(`${cardId}_qty`);
      const o = document.getElementById(`${cardId}_out`);
      if(q) q.value = "";
      if(o) o.textContent = "";
    });

    return el;
  }

  function detailTextFor(id, cfg){
    const c = cfg.currency;
    const r = (k)=> cfg.methods[k] ?? 0;
    switch(id){
      case "youtube":
        return `Watch promoted YouTube videos (2‚Äì5 minutes each) and confirm completion. Example: 10 videos/day √ó ${c} ${fmt(r("youtube"))} = ${c} ${fmt(10*r("youtube"))}. Tip: do them in batches morning/evening.`;
      case "memes":
        return `View or help categorize memes for engagement tests. Each approved meme pays ${c} ${fmt(r("memes"))}. Keep content appropriate; low-quality entries may be rejected.`;
      case "tiktok":
        return `Watch TikTok clips and confirm. Short-form tasks with quick turnover. Example: 20 clips = ${c} ${fmt(20*r("tiktok"))}.`;
      case "surveys":
        return `Answer short local surveys (1‚Äì3 minutes). Honest answers only. ${c} ${fmt(r("surveys"))} each.`;
      case "netflix":
        return `Click/preview Netflix-style promos and record feedback. ${c} ${fmt(r("netflix"))} per ad.`;
      case "referrals":
        return `Invite friends. Each direct referral pays ${c} ${fmt(r("referrals"))}. Example: 5 invites/day = ${c} ${fmt(5*r("referrals"))}.`;
      case "agent":
        return `Agent ranking tasks: verify simple steps for new members. ${c} ${fmt(r("agent"))} per verification.`;
      case "welcome":
        return `One-time welcome bonus of ${c} ${fmt(r("welcome"))} after activation. Enter "1" as quantity to simulate (or leave blank; calculator will show fixed reward).`;
      case "ebooks":
        return `Get access to eBooks & entertainment perks. This is a periodic benefit valued at ~${c} ${fmt(r("ebooks"))}.`;
      case "forex":
        return `Learn basics of Forex with beginner materials. This is an educational perk; not a paid task.`;
      default:
        return `Task details coming soon.`;
    }
  }

  function buildWaysGrid(cfg){
    const el = document.createElement("section");
    el.className = "glass p-5 rounded-2xl";
    el.innerHTML = `<h3 class="text-xl font-extrabold mb-3">Ways to Earn ‚Äî Interactive</h3>`;
    const grid = document.createElement("div");
    grid.className = "grid-2";

    const methods = [
      ["youtube","YouTube Videos","üé•","Watch longer videos & confirm."],
      ["memes","Memes","üéâ","Engagement testing with memes."],
      ["tiktok","TikTok Videos","üéµ","Short clip viewing & confirm."],
      ["surveys","Surveys","üìù","Answer quick local surveys."],
      ["netflix","Netflix Ads","üé¨","Preview & give feedback."],
      ["referrals","Referrals","ü§ù","Invite friends to earn."],
      ["agent","Agent Ranking","üèÜ","Verify steps for new members."],
      ["welcome","Welcome Bonus","üéÅ","One-time bonus after activation."],
      ["ebooks","eBooks/Benefits","üìö","Entertainment/library perks."],
      ["forex","Learn Forex","üìà","Educational materials for basics."]
    ];

    methods.forEach(([id, label, icon, brief], i)=>{
      const card = buildMethodCard(cfg, id, label, icon, brief);
      // Alternate subtle canva backgrounds
      if(i%3===0) card.classList.add("canva-a"); else if(i%3===1) card.classList.add("canva-b"); else card.classList.add("canva-c");
      grid.appendChild(card);
    });

    el.appendChild(grid);
    return el;
  }

  function buildTable(cfg){
    const el = document.createElement("section");
    el.className = "glass p-5 rounded-2xl";
    const rows = [
      ["YouTube", cfg.methods.youtube],
      ["Memes", cfg.methods.memes],
      ["TikTok", cfg.methods.tiktok],
      ["Surveys", cfg.methods.surveys],
      ["Netflix Ads", cfg.methods.netflix],
      ["Referrals (each)", cfg.methods.referrals],
      ["Agent Ranking", cfg.methods.agent],
      ["Welcome Bonus", cfg.methods.welcome],
      ["eBooks/Benefits", cfg.methods.ebooks]
    ].map(([k,v])=>`<tr><td class="p-3">${k}</td><td class="p-3 font-semibold">${cfg.currency} ${fmt(v)}</td></tr>`).join("");

    el.innerHTML = `
      <h3 class="text-xl font-extrabold mb-3">Payout Table ‚Äî ${cfg.flag} ${cfg.name}</h3>
      <div class="overflow-x-auto">
        <table class="w-full text-left">
          <thead><tr class="border-b border-slate-700/40">
            <th class="p-3">Method</th><th class="p-3">Reward</th>
          </tr></thead>
          <tbody class="text-sm">${rows}</tbody>
        </table>
      </div>
    `;
    return el;
  }

  function buildFAQ(cfg){
    const data = [
      ["How do I register?","Open the registration link and follow the steps. Activation fee: "+cfg.currency+" "+fmt(cfg.activationFee)+"."],
      ["How do I withdraw?","Withdrawals are processed weekly via your chosen local method."],
      ["Is this legit?","Yes ‚Äî TrendQash is registered and pays out weekly. See testimonials."],
      ["Support?","WhatsApp "+SUPPORT_WA+" (support only; do not send payments)."]
    ];
    const el = document.createElement("section");
    el.className = "glass p-5 rounded-2xl";
    el.innerHTML = `<h3 class="text-xl font-extrabold mb-3">Frequently Asked Questions</h3>
      <div id="${cfg.key}_faq" class="vstack"></div>`;
    const host = el.querySelector(`#${cfg.key}_faq`);
    data.forEach(([q,a],i)=>{
      const item = document.createElement("div");
      item.className = "card";
      item.innerHTML = `
        <button class="w-full text-left p-3 flex items-center justify-between card-header"><span class="font-semibold">${q}</span><span>+</span></button>
        <div class="card-body p-3 text-sm muted">${a}</div>`;
      item.querySelector(".card-header").addEventListener("click", ()=> item.classList.toggle("open"));
      host.appendChild(item);
    });
    return el;
  }

  function buildHowToJoin(cfg){
    const el = document.createElement("section");
    el.id = "howToJoin";
    el.className = "glass p-5 rounded-2xl canva-b";
    el.innerHTML = `
      <h3 class="text-xl font-extrabold mb-3">How to Join ‚Äî ${cfg.flag} ${cfg.name}</h3>
      <ol class="list-decimal pl-5 space-y-2 text-sm">
        <li>Tap <strong>Register</strong> and create your account.</li>
        <li>Pay the <strong>activation fee</strong>: ${cfg.currency} ${fmt(cfg.activationFee)} (shown within the platform).</li>
        <li>Open the <strong>Tasks</strong> page and start completing methods you like.</li>
        <li>Withdraw weekly to your local method: ${cfg.payments.join(", ")}.</li>
      </ol>
      <div class="hstack mt-4">
        <a class="btn btn-dark heartbeat light-sweep" target="_blank" href="https://www.trendqash.com/user/register.php?ref=Teranchamp">üöÄ Register Now</a>
        <button id="${cfg.key}_share2" class="btn btn-outline">üîó Share this to a friend</button>
      </div>
    `;
    // share (secondary)
    setTimeout(()=>{
      const b = document.getElementById(`${cfg.key}_share2`);
      if(b) b.addEventListener("click", shareSite);
    },0);
    return el;
  }

  function buildChatAndWhatsApp(cfg){
    const el = document.createElement("section");
    el.className = "glass p-5 rounded-2xl";
    el.innerHTML = `
      <h3 class="text-xl font-extrabold mb-3">Support ‚Äî Chat & WhatsApp</h3>
      <div class="grid-2">
        <div class="card p-0 overflow-hidden">
          <div class="p-3 border-b border-slate-700/40 font-semibold">Chatbot</div>
          <div id="${cfg.key}_messages" class="h-56 overflow-y-auto p-3 text-sm space-y-2 bg-black/10"></div>
          <div class="p-3 hstack">
            <input id="${cfg.key}_chat_in" class="input flex-1" placeholder="Ask about registration, withdrawals, earnings..."/>
            <button class="btn btn-dark" data-send>Send</button>
          </div>
          <div class="p-3 hstack text-xs muted">
            <button class="chip" data-quick="register">How to register?</button>
            <button class="chip" data-quick="withdraw">How to withdraw?</button>
            <button class="chip" data-quick="earn">Ways to earn</button>
          </div>
        </div>

        <div class="card p-0 overflow-hidden">
          <div class="p-3 border-b border-slate-700/40 font-semibold">WhatsApp Support</div>
          <div class="p-3">
            <label class="text-sm">Compose message</label>
            <textarea id="${cfg.key}_wa_msg" rows="5" class="input mt-1">Hi, I'm interested in TrendQash ${cfg.name}. My name is [Your Name]. My number: [Your Number]. Please guide me on registration and payouts.</textarea>
            <div class="hstack mt-3">
              <button class="btn btn-primary heartbeat light-sweep" data-open-wa>Open WhatsApp</button>
              <button class="btn btn-ghost" data-fill-example>Use Example</button>
            </div>
            <p class="text-xs muted mt-2">Note: WhatsApp <strong>${SUPPORT_WA}</strong> is support-only ‚Äî do not send payments there.</p>
          </div>
        </div>
      </div>
    `;

    // Init chatbot welcome
    const box = el.querySelector(`#${cfg.key}_messages`);
    if(box){
      box.insertAdjacentHTML("beforeend",
        `<div class="p-2 rounded bg-white/5">üëã Hi! I can help with <em>registration</em>, <em>withdrawals</em>, and <em>earnings</em>. Try the quick buttons below, or type a question.</div>`);
    }

    // Chat events
    el.querySelector("[data-send]").addEventListener("click", ()=> sendChat(cfg.key));
    el.querySelectorAll("[data-quick]").forEach(b=>{
      b.addEventListener("click", ()=>{
        const t = b.getAttribute("data-quick");
        const input = document.getElementById(`${cfg.key}_chat_in`);
        if(!input) return;
        input.value = (t==="register"?"How to register?": t==="withdraw"?"How to withdraw?":"What are the ways to earn?");
        sendChat(cfg.key);
      });
    });

    // WhatsApp events
    el.querySelector("[data-open-wa]").addEventListener("click", ()=> openWhatsApp(cfg.key));
    el.querySelector("[data-fill-example]").addEventListener("click", ()=> copyExample(cfg.key));

    return el;
  }

  function buildTestimonials(cfg){
    const el = document.createElement("section");
    el.className = "glass p-5 rounded-2xl";
    const slides = (cfg.testimonials||[]).map(t=>`
      <div class="min-w-full p-4">
        <p class="italic">‚Äú${t.quote}‚Äù</p>
        <div class="mt-2 text-sm muted">‚Äî ${t.name}, ${t.city}</div>
      </div>`).join("");
    el.innerHTML = `
      <h3 class="text-xl font-extrabold mb-3">Member Testimonials ‚Äî ${cfg.flag} ${cfg.name}</h3>
      <div class="relative overflow-hidden rounded-lg">
        <div id="${cfg.key}_ttrack" class="flex transition-transform duration-700">${slides}</div>
        <button class="absolute left-3 top-1/2 -translate-y-1/2 btn btn-ghost" data-ts-prev>‚Äπ</button>
        <button class="absolute right-3 top-1/2 -translate-y-1/2 btn btn-ghost" data-ts-next>‚Ä∫</button>
        <div id="${cfg.key}_tdots" class="absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2"></div>
      </div>`;
    // init
    setTimeout(()=> initTestimonialAuto(cfg.key, cfg), 0);
    return el;
  }
  // ---------- Rendering ----------
  let selectedCountry = "kenya"; // default
  function renderCountryPage(key, host){
    const cfg = COUNTRIES[key];
    host.innerHTML = "";
    host.appendChild(buildHero(cfg));
    host.appendChild(buildBusiness(cfg));
    host.appendChild(buildWaysGrid(cfg));
    host.appendChild(buildTable(cfg));
    host.appendChild(buildFAQ(cfg));
    host.appendChild(buildHowToJoin(cfg));
    host.appendChild(buildChatAndWhatsApp(cfg));
    host.appendChild(buildTestimonials(cfg));
  }

  // ---------- Testimonials carousel ----------
  const TestState = {};
  function initTestimonialAuto(key, cfg){
    const track = document.getElementById(`${key}_ttrack`);
    const dots = document.getElementById(`${key}_tdots`);
    if(!track || !dots) return;
    const count = (cfg.testimonials||[]).length || 1;
    dots.innerHTML = "";
    for(let i=0;i<count;i++){
      const d=document.createElement("div");
      d.className="w-2.5 h-2.5 rounded-full bg-white/30"+(i===0?" ring-2 ring-white":"");
      d.dataset.i=i; d.onclick=()=>{ TestState[key].idx=i; sync(); };
      dots.appendChild(d);
    }
    TestState[key] = { idx:0, count };
    function sync(){
      track.style.transform = `translateX(-${TestState[key].idx*100}%)`;
      Array.from(dots.children).forEach((el,i)=> {
        el.classList.toggle("ring-2", i===TestState[key].idx);
        el.classList.toggle("ring-white", i===TestState[key].idx);
      });
    }
    TestState[key].timer = setInterval(()=>{ TestState[key].idx = (TestState[key].idx+1)%count; sync(); }, 4200);
    const prevBtn = track.parentElement.querySelector("[data-ts-prev]");
    const nextBtn = track.parentElement.querySelector("[data-ts-next]");
    prevBtn.addEventListener("click", ()=>{ TestState[key].idx = (TestState[key].idx-1+count)%count; sync(); });
    nextBtn.addEventListener("click", ()=>{ TestState[key].idx = (TestState[key].idx+1)%count; sync(); });
  }

  // ---------- Chatbot ----------
  function sendChat(countryKey){
    const inEl = document.getElementById(`${countryKey}_chat_in`);
    const box = document.getElementById(`${countryKey}_messages`);
    const txt = (inEl?.value||"").trim();
    if(!txt) return;
    // user bubble
    box.insertAdjacentHTML("beforeend", `<div class="flex justify-end"><div class="px-3 py-2 rounded bg-sky-600 text-white">${escapeHtml(txt)}</div></div>`);
    inEl.value=""; box.scrollTop = box.scrollHeight;

    const cfg = COUNTRIES[countryKey];
    const lc = txt.toLowerCase();
    let reply = `Hi ‚Äî ask about registration, withdrawals, or ways to earn.`;

    if(lc.includes("register") || lc.includes("join")){
      reply = `To register: open the link, create your account, and pay the activation fee of ${cfg.currency} ${fmt(cfg.activationFee)}. Then start tasks.`;
    } else if(lc.includes("withdraw")){
      reply = `Withdrawals are processed weekly to: ${cfg.payments.join(", ")}. Check your dashboard for steps.`;
    } else if(lc.includes("earn") || lc.includes("payout") || lc.includes("pay")){
      const m = cfg.methods;
      reply = `Top payouts per task: YouTube ${cfg.currency} ${fmt(m.youtube)}, TikTok ${fmt(m.tiktok)}, Surveys ${fmt(m.surveys)}, Referrals ${fmt(m.referrals)} each. Use the calculators inside each card.`;
    } else if(lc.includes("referral")){
      reply = `Invite friends with your link. Each direct referral pays ${cfg.currency} ${fmt(cfg.methods.referrals)}.`;
    }

    setTimeout(()=>{
      box.insertAdjacentHTML("beforeend", `<div class="mt-2"><div class="px-3 py-2 rounded bg-white/5">${reply}</div></div>`);
      box.scrollTop = box.scrollHeight;
    }, 300);
  }

  // ---------- WhatsApp ----------
  function openWhatsApp(countryKey){
    const ta = document.getElementById(`${countryKey}_wa_msg`);
    const msg = (ta?.value||"").trim();
    if(!msg) return alert("Type a message first.");
    const phone = SUPPORT_WA.replace(/\+| /g,"");
    window.open(`https://wa.me/${phone}?text=${encodeURIComponent(msg)}`, "_blank");
  }
  function copyExample(countryKey){
    const ta = document.getElementById(`${countryKey}_wa_msg`);
    if(ta) ta.value = `Hi, I'm interested in TrendQash ${COUNTRIES[countryKey].name}. My name is [Your Name]. My number: [Your Number]. Please guide me on registration and payouts.`;
  }

  // ---------- Share ----------
  async function shareSite(){
    const shareData = {
      title: "TrendQash Agencies ‚Äî Earn from local tasks",
      text: "Try TrendQash: watch videos, memes, surveys, referrals ‚Äî localized payouts & weekly withdrawals.",
      url: location.href
    };
    try{
      if(navigator.share){ await navigator.share(shareData); }
      else{
        await navigator.clipboard.writeText(`${shareData.text}\n${shareData.url}`);
        alert("Link copied! Share it with your friends.");
      }
    }catch(e){ /* user canceled */ }
  }

  // ---------- Country Popup ----------
  const popup = document.getElementById("countryPopup");
  const selectEl = document.getElementById("countrySelect");
  document.getElementById("openPopupBtn").addEventListener("click", ()=> popup.classList.add("show"));
  document.getElementById("switchCountryBtn").addEventListener("click", ()=> popup.classList.add("show"));
  document.getElementById("cancelCountryBtn").addEventListener("click", ()=> popup.classList.remove("show"));
  document.getElementById("chooseCountryBtn").addEventListener("click", ()=>{
    const val = selectEl.value;
    if(!val || !COUNTRIES[val]) return alert("Please select a country.");
    popup.classList.remove("show");
    setCountry(val, true);
  });

  // ---------- Slide switch ----------
  const track = document.getElementById("slideTrack");
  function setCountry(key, animate=false){
    if(!COUNTRIES[key]) return;
    localStorage.setItem("selectedCountry", key);
    selectedCountry = key;

    const nextHost = document.getElementById("countryContentNext");
    renderCountryPage(key, nextHost);

    if(animate){
      // slide in next
      track.style.transform = "translateX(-50%)";
      // after transition, swap panes
      track.addEventListener("transitionend", onDone, { once:true });
      function onDone(){
        const curHost = document.getElementById("countryContent");
        curHost.innerHTML = nextHost.innerHTML;
        nextHost.innerHTML = "";
        track.style.transition = "none";
        track.style.transform = "translateX(0)";
        // force reflow then restore transition
        track.offsetHeight; // reflow
        track.style.transition = "transform .45s ease";
        updateHeaderForCountry();
      }
    }else{
      const curHost = document.getElementById("countryContent");
      renderCountryPage(key, curHost);
      updateHeaderForCountry();
    }
  }
  function updateHeaderForCountry(){
    const cfg = COUNTRIES[selectedCountry];
    const regTop = document.getElementById("registerTop");
    if(regTop) regTop.textContent = `üöÄ Join ${cfg.name} ‚Äî ${cfg.currency} ${fmt(cfg.activationFee)}`;
  }

  // ---------- Init ----------
  (function init(){
    document.getElementById("year").textContent = new Date().getFullYear();
    document.getElementById("shareBtn").addEventListener("click", shareSite);
    setInterval(tickLiveCounter, 4500); tickLiveCounter();

    // restore saved country
    const saved = localStorage.getItem("selectedCountry");
    const initial = (saved && COUNTRIES[saved]) ? saved : "kenya";
    // preselect in popup
    const sel = document.getElementById("countrySelect");
    if(sel) sel.value = initial;

    renderCountryPage(initial, document.getElementById("countryContent"));
    updateHeaderForCountry();
  })();
  </script>
</body>
</html>